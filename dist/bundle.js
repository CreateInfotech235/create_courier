(()=>{"use strict";var e={73:function(e,t,a){var r,n=this&&this.__createBinding||(Object.create?function(e,t,a,r){void 0===r&&(r=a);var n=Object.getOwnPropertyDescriptor(t,a);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,r,n)}:function(e,t,a,r){void 0===r&&(r=a),e[r]=t[a]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),d=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[t.length]=a);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a=r(e),d=0;d<a.length;d++)"default"!==a[d]&&n(t,e,a[d]);return i(t,e),t}),o=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const u=s(a(3268)),l=s(a(8577)),c=a(818),g=s(a(7252)),f=s(a(9856)),m=s(a(2096)),p=a(4437),y=s(a(2320)),v=s(a(5457)),h=s(a(9585)),_=a(3503),E=s(a(8670)),b=s(a(1042)),D=s(a(8335)),R=s(a(4139)),I=s(a(7076)),O=s(a(4663)),T=(0,g.default)();(0,c.config)({path:".env.development.local"});const C=f.default.createServer(T);(0,v.default)(process.env.DB_URI),(0,I.default)();const A=process.env.PORT||1e4;T.use((0,m.default)("dev"));const S={origin:process.env.ALLOW_ORIGIN};T.use((0,l.default)(S)),T.use(u.default.json({limit:"50mb"})),T.use(u.default.urlencoded({limit:"50mb",extended:!0,parameterLimit:5e4})),T.use(O.default),T.use(R.default),d(a(818)).config();const{ENV:P}=process.env;"DEV"===P&&T.use("/docs-for-api",y.default.serve,y.default.setup(h.default));const N=new p.Server(C);N.on("connection",(e=>{console.log("ðŸš€ ~ io.on ~ socket:","socket connected"),e.on("orderTracking",((t,a,r)=>o(void 0,void 0,void 0,(function*(){if(!r||!a)return e.emit("orderTracking",{status:400,message:"Lat Long Required"});const n=yield D.default.findOne({deliveryBoy:t});(yield b.default.findOne({orderId:n.order,status:{$nin:[_.ORDER_HISTORY.CREATED,_.ORDER_HISTORY.ASSIGNED,_.ORDER_HISTORY.CANCELLED,_.ORDER_HISTORY.DELIVERED]}}))&&(N.to(n.order.toString()).emit("orderTracking",{lat:a,long:r}),yield E.default.updateOne({_id:t},{$set:{"location.coordinates":[r,a]}}))})))),e.on("socketJoin",(t=>{e.join(t.toString())})),e.on("socketLeave",(t=>{e.leave(t.toString())})),e.on("disconnect",(()=>{console.log("ðŸš€ ~ socket.on ~ disconnect:","socket disconnected")}))})),C.listen(A,(()=>o(void 0,void 0,void 0,(function*(){console.log(`Server Running At Port : ${A}`)}))))},2205:function(e,t,a){var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getOrderCounts=t.logout=t.renewToken=t.profileUpdate=t.sendEmailOrMobileOtp=t.profileCredentialUpdate=t.signIn=void 0;const i=a(829),d=a(4473),o=n(a(267)),s=n(a(3375)),u=n(a(5293)),l=a(2581),c=n(a(8229)),g=a(9975),f=a(9475),m=n(a(1514)),p=n(a(1042)),y=n(a(8335)),v=n(a(8670)),h=n(a(1186));t.signIn=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,c.default)(e.body,g.adminSignInValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield o.default.findOne({email:r.email});if(!n)return t.badRequest({message:(0,d.getLanguage)("en").invalidLoginCredentials});if(!(yield(0,l.passwordValidation)(r.password,n.password)))return t.badRequest({message:(0,d.getLanguage)("en").invalidLoginCredentials});const{accessToken:i,refreshToken:s}=(0,l.createAuthTokens)(n._id);return t.ok({message:(0,d.getLanguage)("en").loginSuccessfully,data:{data:n,adminAuthData:{accessToken:i,refreshToken:s}}})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.profileCredentialUpdate=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,c.default)(e.body,f.adminCredentialValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;return(yield u.default.findOne({value:r.otp,customerEmail:r.email,expiry:{$gte:Date.now()}}))?(yield o.default.updateOne({_id:r.adminId},{$set:r}),t.ok({message:(0,d.getLanguage)("en").dataUpdatedSuccessfully})):t.badRequest({message:(0,d.getLanguage)("en").otpExpired})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.sendEmailOrMobileOtp=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,c.default)(e.body,f.otpVerifyValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n="DEV"===process.env.ENV?999999:(0,l.generateIntRandomNo)(111111,999999);return yield(0,l.emailOrMobileOtp)(r.email,`This is your otp for registration ${n}`),yield u.default.updateOne({value:n,customerEmail:r.email,customerMobile:r.contactNumber},{value:n,customerEmail:r.email,customerMobile:r.contactNumber,action:r.personType,expiry:Date.now()+6e5},{upsert:!0}),t.ok({message:(0,d.getLanguage)("en").otpSentSuccess,data:"DEV"!==process.env.ENV?{}:{otp:n}})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.profileUpdate=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,c.default)(e.body,f.adminProfileValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=r.profileImage.split(","),i=yield o.default.findOne({_id:r.adminId},{profileImage:1});return(null==i?void 0:i.profileImage)&&(0,l.removeUploadedFile)(i.profileImage),r.profileImage=yield(0,l.uploadFile)(n[0],n[1],"ADMIN-PROFILE"),yield o.default.updateOne({_id:r.adminId},{$set:r}),t.ok({message:(0,d.getLanguage)("en").dataUpdatedSuccessfully})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.renewToken=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,c.default)(e.body,f.renewTokenValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=(0,i.verify)(r.refreshToken,process.env.REFRESH_SECRET_KEY);if(!(null==n?void 0:n.accessToken))return t.badRequest({message:(0,d.getLanguage)("en").invalidToken});const u=yield o.default.findById(n.id);if(!u)return t.badRequest({message:(0,d.getLanguage)("en").invalidToken});yield s.default.create({accessToken:n.accessToken,refreshToken:r.refreshToken});const{accessToken:g,refreshToken:m}=(0,l.createAuthTokens)(u._id);return t.ok({message:(0,d.getLanguage)("en").renewTokenSuccessfully,data:{accessToken:g,refreshToken:m}})}catch(e){return console.log(e),t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.logout=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,c.default)(e.body,f.renewTokenValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=(0,i.verify)(r.refreshToken,process.env.REFRESH_SECRET_KEY);return(null==n?void 0:n.accessToken)&&(yield o.default.findById(n.id))?(yield s.default.findOne({accessToken:n.accessToken,refreshToken:r.refreshToken,isActive:!1}))?t.badRequest({message:(0,d.getLanguage)("en").invalidToken}):(yield s.default.create({accessToken:n.accessToken,refreshToken:r.refreshToken}),t.ok({message:(0,d.getLanguage)("en").logoutSuccessfully})):t.badRequest({message:(0,d.getLanguage)("en").invalidToken})}catch(e){return console.log(e),t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.getOrderCounts=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const e=yield p.default.countDocuments(),a=yield m.default.countDocuments({status:"CREATED"}),r=yield m.default.countDocuments({status:"ASSIGNED"}),n=yield y.default.countDocuments({status:"ACCEPTED"}),i=yield m.default.countDocuments({status:"ARRIVED"}),o=yield m.default.countDocuments({status:"PICKED_UP"}),s=yield m.default.countDocuments({status:"DEPARTED"}),u=yield m.default.countDocuments({status:"DELIVERED"}),l=yield m.default.countDocuments({status:"CANCELLED"}),c=yield v.default.countDocuments();let g={totalOrders:e,createdOrders:a,assignedOrders:r,acceptedOrders:n,arrivedOrders:i,pickedOrders:o,departedOrders:s,deliveredOrders:u,cancelledOrders:l,deliveryMan:c,subscribedMerchants:yield h.default.countDocuments({isActive:!0}),unsubscribedMerchants:yield h.default.countDocuments({isActive:{$ne:!0}})};return t.ok({message:(0,d.getLanguage)("en").countedData,data:g})}catch(e){return console.log(e),t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}}))},6034:function(e,t,a){var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},n=this&&this.__rest||function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteCity=t.getCountryNames=t.getDayWiseChargesByCity=t.getCities=t.updateCity=t.createCity=t.updateDayWiseCharges=t.createDayWiseCharges=void 0;const d=i(a(6037)),o=a(3503),s=a(4473),u=i(a(7591)),l=i(a(9040)),c=i(a(381)),g=i(a(1042)),f=i(a(146)),m=a(2581),p=i(a(8229)),y=a(9975),v=a(2336);t.createDayWiseCharges=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,p.default)(e.body,v.createDayWiseChargeValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;if(!(yield f.default.findOne({_id:r.productChargeId,cityId:r.cityId})))return t.badRequest({message:(0,s.getLanguage)("en").errorDataNotFound});r.hours&&(r.dayInMs=3600*r.hours*1e3);const n=yield c.default.findOne({productChargeId:r.productChargeId}).sort({dayNumber:-1});return r.dayNumber=n?n.dayNumber+1:1,r.charge=r.fixedCharge,yield c.default.create(r),t.ok({})}catch(e){return t.failureResponse({message:(0,s.getLanguage)("en").somethingWentWrong})}})),t.updateDayWiseCharges=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,p.default)(e.body,v.updateDayWiseChargeValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;return(yield f.default.findOne({_id:r.productChargeId,cityId:r.cityId}))?(r.hours&&(r.dayInMs=3600*r.hours*1e3),r.fixedCharge&&(r.charge=r.fixedCharge),yield c.default.updateOne({productChargeId:r.productChargeId,dayNumber:r.dayNumber},{$set:r}),t.ok({})):t.badRequest({message:(0,s.getLanguage)("en").errorDataNotFound})}catch(e){return t.failureResponse({message:(0,s.getLanguage)("en").somethingWentWrong})}})),t.createCity=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,p.default)(e.body,v.createCityValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield l.default.findById(r.countryID);if(!n)return t.badRequest({message:(0,s.getLanguage)("en").countryNotFound});if(!(yield u.default.findOne({cityName:r.cityName}))){const e=yield u.default.create({cityName:r.cityName,countryID:n._id,commissionType:r.commissionType});r.cityId=e._id.toString()}return(yield f.default.findOne({cityId:r.cityId,pickupRequest:r.pickupRequest,isCustomer:!1}))?t.badRequest({message:(0,s.getLanguage)("en").errorDataNotFound}):(yield f.default.create(r),t.ok({message:(0,s.getLanguage)("en").cityCreated}))}catch(e){return console.log("error",e),t.failureResponse({message:(0,s.getLanguage)("en").somethingWentWrong})}})),t.updateCity=(e,t)=>r(void 0,void 0,void 0,(function*(){try{Object.assign(e.body,e.params);const a=(0,p.default)(e.body,v.updateCityValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;if(!(yield l.default.findById(r.countryID)))return t.badRequest({message:(0,s.getLanguage)("en").countryNotFound});const i=[o.ORDER_HISTORY.CREATED,o.ORDER_HISTORY.ASSIGNED,o.ORDER_HISTORY.ARRIVED,o.ORDER_HISTORY.DEPARTED,o.ORDER_HISTORY.PICKED_UP,o.ORDER_HISTORY.DELAYED],d=0!==(yield g.default.find({status:{$in:i},isCustomer:!1,city:r.cityId})).length;if("commissionType"in r&&d)return t.badRequest({message:(0,s.getLanguage)("en").orderNotDelivered});let c={};if(r.cityName||r.commissionType||r.countryID){let{cityName:e,commissionType:t,countryID:a}=r;c=n(r,["cityName","commissionType","countryID"]),yield u.default.updateOne({_id:r.cityId},{$set:Object.assign(Object.assign(Object.assign({},e&&{cityName:e}),t&&{commissionType:t}),a&&{countryID:a})})}if(d||"{}"===JSON.stringify(c)){if(d)return t.badRequest({message:(0,s.getLanguage)("en").orderNotDelivered})}else yield f.default.updateOne({cityId:r.cityId},{$set:c});return t.ok({message:(0,s.getLanguage)("en").cityUpdated})}catch(e){return t.failureResponse({message:(0,s.getLanguage)("en").somethingWentWrong})}})),t.getCities=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,p.default)(e.query,v.cityListValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield u.default.aggregate([{$match:Object.assign({},r.cityName&&{cityName:{$regex:r.cityName,$options:"i"}})},{$lookup:{from:"country",localField:"countryID",foreignField:"_id",as:"countryData",pipeline:[{$project:{_id:0,countryName:1,currency:1}}]}},{$unwind:{path:"$countryData",preserveNullAndEmptyArrays:!0}},{$lookup:{from:"ProductCharges",localField:"_id",foreignField:"cityId",as:"productChargeData",pipeline:[{$match:{isCustomer:!1}}]}},{$unwind:{path:"$productChargeData",preserveNullAndEmptyArrays:!0}},{$project:{_id:0,cityId:"$_id",cityName:"$cityName",countryID:1,countryName:"$countryData.countryName",currency:"$countryData.currency",productChargeId:"$productChargeData._id",minimumDistance:"$productChargeData.minimumDistance",minimumWeight:"$productChargeData.minimumWeight",cancelCharge:"$productChargeData.cancelCharge",perDistanceCharge:"$productChargeData.perDistanceCharge",perWeightCharge:"$productChargeData.perWeightCharge",adminCommission:"$productChargeData.adminCommission",commissionType:"$productChargeData.commissionType",createdDate:"$createdAt",isActive:1}},...(0,m.getMongoCommonPagination)({pageCount:r.pageCount,pageLimit:r.pageLimit})]);return t.ok({data:n[0]})}catch(e){return t.failureResponse({message:(0,s.getLanguage)("en").somethingWentWrong})}})),t.getDayWiseChargesByCity=(e,t)=>r(void 0,void 0,void 0,(function*(){try{Object.assign(e.query,e.params);const a=(0,p.default)(e.query,v.dayChargesListValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield c.default.aggregate([{$match:{productChargeId:new d.default.Types.ObjectId(r.productChargeId)}},{$sort:{dayNumber:1}},{$project:{_id:0,dayNumber:1,title:1,hours:{$divide:[{$divide:["$dayInMs",1e3]},86400]},charge:1}},...(0,m.getMongoCommonPagination)({pageCount:r.pageCount,pageLimit:r.pageLimit})]);return t.ok({data:n[0]})}catch(e){return t.failureResponse({message:(0,s.getLanguage)("en").somethingWentWrong})}})),t.getCountryNames=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,p.default)(e.query,y.paginationValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield l.default.aggregate([{$project:{_id:0,countryId:"$_id",name:1}},...(0,m.getMongoCommonPagination)({pageCount:r.pageCount,pageLimit:r.pageLimit})]);return t.ok({data:n[0]})}catch(e){return t.failureResponse({message:(0,s.getLanguage)("en").somethingWentWrong})}})),t.deleteCity=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const{cityId:a}=e.params;return a&&(yield u.default.findById(a))?(yield u.default.deleteOne({_id:a}),t.ok({message:(0,s.getLanguage)("en").cityDeleted})):t.badRequest({message:(0,s.getLanguage)("en").noCityFound})}catch(e){return console.log("ðŸš€ ~ deleteDeliveryMan ~ error:",e),t.failureResponse({message:(0,s.getLanguage)("en").somethingWentWrong})}}))},1577:function(e,t,a){var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteCountry=t.getCitiesByCountry=t.getCountries=t.updateCountry=t.createCountry=void 0;const i=a(3503),d=a(4473),o=n(a(7591)),s=n(a(9040)),u=n(a(1042)),l=a(2581),c=n(a(8229)),g=a(9975),f=a(7077);t.createCountry=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,c.default)(e.body,f.createCountryValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;return(yield s.default.findOne({countryName:r.countryName}))?t.badRequest({message:(0,d.getLanguage)("en").countryRegisteredAlready}):(r.countryName=r.countryName,yield s.default.create(r),t.ok({message:(0,d.getLanguage)("en").countryCreated}))}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.updateCountry=(e,t)=>r(void 0,void 0,void 0,(function*(){try{Object.assign(e.body,e.params);const a=(0,c.default)(e.body,f.updateCountryValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=[i.ORDER_HISTORY.CREATED,i.ORDER_HISTORY.ASSIGNED,i.ORDER_HISTORY.ARRIVED,i.ORDER_HISTORY.DEPARTED,i.ORDER_HISTORY.PICKED_UP,i.ORDER_HISTORY.DELAYED],o=0!==(yield u.default.find({status:{$in:n},isCustomer:!1,country:r.countryId})).length;return("distanceType"in r||"weightType"in r)&&o?t.badRequest({message:(0,d.getLanguage)("en").orderNotDelivered}):(r.countryName&&(r.countryName=r.countryName),yield s.default.updateOne({_id:r.countryId},{$set:r}),t.ok({message:(0,d.getLanguage)("en").countryUpdated}))}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.getCountries=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,c.default)(e.query,g.paginationValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield s.default.aggregate([{$project:{_id:0,countryId:"$_id",countryName:"$countryName",distanceType:1,weightType:1,createdDate:"$createdAt",isActive:1}},...(0,l.getMongoCommonPagination)({pageCount:r.pageCount,pageLimit:r.pageLimit})]);return t.ok({data:n[0]})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.getCitiesByCountry=(e,t)=>r(void 0,void 0,void 0,(function*(){try{Object.assign(e.params,e.query);const a=(0,c.default)(e.params,f.countryWiseCityValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield o.default.aggregate([{$match:{countryID:r.countryID}},{$project:{_id:0,cityId:"$_id",cityName:1}},...(0,l.getMongoCommonPagination)({pageCount:r.pageCount,pageLimit:r.pageLimit})]);return t.ok({data:n[0]})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.deleteCountry=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const{countryId:a}=e.params;return a&&(yield s.default.findById(a))?(yield s.default.deleteOne({_id:a}),t.ok({message:(0,d.getLanguage)("en").countryDeleted})):t.badRequest({message:(0,d.getLanguage)("en").noCountryFound})}catch(e){return console.log("ðŸš€ ~ deleteDeliveryMan ~ error:",e),t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}}))},5791:function(e,t,a){var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.addCustomer=void 0;const i=n(a(3234)),d=a(4473),o=n(a(8229)),s=a(9475);t.addCustomer=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,o.default)(e.body,s.customerSignUpValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;if(yield i.default.findOne({email:r.email}))return t.badRequest({message:(0,d.getLanguage)("en").emailRegisteredAlready});const n=yield i.default.create(Object.assign(Object.assign({},r),{createdByAdmin:!0,location:{type:"Point",coordinates:[r.location.longitude,r.location.latitude]}}));return t.ok({message:(0,d.getLanguage)("en").userRegistered,data:n})}catch(e){return console.log("ðŸš€ ~ addCustomer ~ error:",e),t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}}))},9683:function(e,t,a){var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteDeliveryMan=t.addDeliveryMan=t.getUserWithdrawHistory=t.getDeliveryManWalletHistory=t.getUserNames=t.getDeliveryManNames=t.getDeliveryManInfo=t.getDeliveryManOrders=t.getAllDeliveryMansFromAdmin=t.getAllDeliveryMans=t.getDeliveryMans=t.getDeliveryManProfileById=t.getOrderLocations=t.getDeliveryManLocations=t.getDeliveryManDocuments=t.updateVerificationStatus=void 0;const i=n(a(6037)),d=a(3503),o=a(4473),s=n(a(8670)),u=n(a(7501)),l=n(a(1042)),c=n(a(8815)),g=n(a(8061)),f=a(2581),m=n(a(8229)),p=a(9475),y=n(a(7501)),v=a(2581),h=a(9975);t.updateVerificationStatus=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,m.default)(e.body,h.verificationStatusValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n={deliveryManId:r.deliveryManId,document:r.documentId,status:d.SUBCRIPTION_REQUEST.PENDING};return(yield u.default.findOne(n))?((yield u.default.updateOne(n,{$set:{status:r.status}}))&&(yield u.default.updateOne({_id:r.deliveryManId},{$set:{isVerified:!0}})),t.ok({message:(0,o.getLanguage)("en").documentVerificationUpdatedSuccessfully})):t.badRequest({message:(0,o.getLanguage)("en").errorDocumentNotFound})}catch(e){return t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.getDeliveryManDocuments=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,m.default)(e.query,h.paginationValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield u.default.aggregate([{$sort:{createdAt:-1}},{$lookup:{from:"documents",localField:"document",foreignField:"_id",as:"documentData",pipeline:[{$project:{name:1}}]}},{$unwind:{path:"$documentData",preserveNullAndEmptyArrays:!0}},{$group:{_id:"$deliveryManId",data:{$push:{documentId:"$documentData._id",documentName:"$documentData.name",createdAt:"$createdAt",document:"$image",status:"$status"}}}},{$lookup:{from:"deliveryMan",localField:"_id",foreignField:"_id",as:"deliveryManData",pipeline:[{$project:{_id:0,name:1}}]}},{$unwind:{path:"$deliveryManData",preserveNullAndEmptyArrays:!0}},{$project:{_id:0,deliveryManId:"$_id",deliveryManName:"$deliveryManData.name",documents:"$data"}},{$unwind:{path:"$documents",preserveNullAndEmptyArrays:!0}},...(0,f.getMongoCommonPagination)({pageCount:r.pageCount,pageLimit:r.pageLimit})]);return t.ok({data:n[0]})}catch(e){return t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.getDeliveryManLocations=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,m.default)(e.query,h.paginationValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield s.default.aggregate([{$match:{isCustomer:!1}},{$lookup:{from:"country",localField:"countryId",foreignField:"_id",as:"countryData",pipeline:[{$project:{_id:0,name:1}}]}},{$unwind:{path:"$countryData",preserveNullAndEmptyArrays:!0}},{$lookup:{from:"city",localField:"cityId",foreignField:"_id",as:"cityData",pipeline:[{$project:{_id:0,name:1}}]}},{$unwind:{path:"$cityData",preserveNullAndEmptyArrays:!0}},{$project:{deliveryManId:"$_id",location:{latitude:{$arrayElemAt:["$location.coordinates",1]},longitude:{$arrayElemAt:["$location.coordinates",0]}},country:"$countryData.countryName",city:"$cityData.cityName"}},...(0,f.getMongoCommonPagination)({pageCount:r.pageCount,pageLimit:r.pageLimit})]);return t.ok({data:n[0]})}catch(e){return t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.getOrderLocations=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,m.default)(e.query,h.orderLocationValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n={status:r.status},i={status:r.status!==d.ADMIN_ORDER_LOCATIONS.ACCEPTED?d.ORDER_STATUS.ACCEPTED:r.status};r.status===d.ADMIN_ORDER_LOCATIONS.ACCEPTED?n.status=d.ADMIN_ORDER_LOCATIONS.ASSIGNED:r.status===d.ADMIN_ORDER_LOCATIONS.ARRIVED&&(n.status=d.ORDER_STATUS.CREATED,i.status=d.SUBCRIPTION_REQUEST.PENDING);const o=yield l.default.aggregate([{$match:n},{$lookup:{from:"orderAssign",localField:"orderId",foreignField:"order",as:"orderAssignData",pipeline:[{$match:i}]}},{$unwind:{path:"$orderAssignData",preserveNullAndEmptyArrays:!0}},{$match:{orderAssignData:{$exists:!0}}},{$project:{_id:0,orderId:1,pickupLocation:"$pickupDetails.location.coordinates",deliveryLocation:"$deliveryLocation.coordinates"}}]);return t.ok({data:o[0]})}catch(e){return t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.getDeliveryManProfileById=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,m.default)(e.params,h.deliveryManIdValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield s.default.aggregate([{$match:{_id:new i.default.Types.ObjectId(r.deliveryManId)}},{$lookup:{from:"country",localField:"countryId",foreignField:"_id",as:"countryData",pipeline:[{$project:{_id:0,name:1}}]}},{$unwind:{path:"$countryData",preserveNullAndEmptyArrays:!0}},{$lookup:{from:"city",localField:"cityId",foreignField:"_id",as:"cityData",pipeline:[{$project:{_id:0,name:1}}]}},{$unwind:{path:"$cityData",preserveNullAndEmptyArrays:!0}},{$lookup:{from:"deliveryManDocuments",localField:"_id",foreignField:"deliveryManId",as:"documents",pipeline:[{$project:{_id:0,documentNumber:1,document:"$image"}}]}},{$project:{_id:0,name:1,image:1,mobileNumber:1,location:{$concat:["$cityData.cityName",",","$countryData.countryName"]},address:1,documents:1}}]);return t.ok({data:n})}catch(e){return t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.getDeliveryMans=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,m.default)(e.query,h.deliveryManListValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n={isVerified:r.isVerified,isCustomer:!1};r.searchValue&&(n.name={$regex:new RegExp(r.searchValue,"i")});const i=yield s.default.aggregate([{$match:n},{$lookup:{from:"country",localField:"countryId",foreignField:"_id",as:"countryData"}},{$unwind:{path:"$countryData",preserveNullAndEmptyArrays:!0}},{$lookup:{from:"city",localField:"cityId",foreignField:"_id",as:"cityData"}},{$unwind:{path:"$cityData",preserveNullAndEmptyArrays:!0}},{$project:{name:1,countryCode:1,contactNumber:1,email:1,status:1,country:"$countryData.countryName",city:"$cityData.cityName",registerDate:"$createdAt",isVerified:1,location:{latitude:{$arrayElemAt:["$location.coordinates",0]},longitude:{$arrayElemAt:["$location.coordinates",1]}}}},...(0,f.getMongoCommonPagination)({pageCount:r.pageCount,pageLimit:r.pageLimit})]);return t.ok({data:i[0]})}catch(e){return t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.getAllDeliveryMans=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const e=yield s.default.aggregate([{$lookup:{from:"country",localField:"countryId",foreignField:"_id",as:"countryData"}},{$unwind:{path:"$countryData",preserveNullAndEmptyArrays:!0}},{$lookup:{from:"city",localField:"cityId",foreignField:"_id",as:"cityData"}},{$unwind:{path:"$cityData",preserveNullAndEmptyArrays:!0}},{$sort:{createdAt:-1}},{$project:{name:1,countryCode:1,contactNumber:1,email:1,status:1,country:"$countryData.countryName",city:"$cityData.cityName",merchantId:1,createdByMerchant:1,createdByAdmin:1,registerDate:"$createdAt",isVerified:1,location:{latitude:{$arrayElemAt:["$location.coordinates",0]},longitude:{$arrayElemAt:["$location.coordinates",1]}}}}]);return t.ok({data:e})}catch(e){return t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.getAllDeliveryMansFromAdmin=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const e=yield s.default.aggregate([{$match:{createdByAdmin:!0}},{$lookup:{from:"country",localField:"countryId",foreignField:"_id",as:"countryData"}},{$unwind:{path:"$countryData",preserveNullAndEmptyArrays:!0}},{$lookup:{from:"city",localField:"cityId",foreignField:"_id",as:"cityData"}},{$unwind:{path:"$cityData",preserveNullAndEmptyArrays:!0}},{$sort:{createdAt:-1}},{$project:{name:1,countryCode:1,contactNumber:1,email:1,status:1,country:"$countryData.countryName",city:"$cityData.cityName",merchantId:1,createdByMerchant:1,createdByAdmin:1,registerDate:"$createdAt",isVerified:1,location:{latitude:{$arrayElemAt:["$location.coordinates",0]},longitude:{$arrayElemAt:["$location.coordinates",1]}}}}]);return t.ok({data:e})}catch(e){return t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.getDeliveryManOrders=(e,t)=>r(void 0,void 0,void 0,(function*(){try{Object.assign(e.params,e.query);const a=(0,m.default)(e.params,h.deliveryManOrderListValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n={"orderAssignInfo.deliveryBoy":new i.default.Types.ObjectId(r.deliveryManId),"orderAssignInfo.status":d.ORDER_REQUEST.ACCEPTED,status:{$ne:d.ORDER_HISTORY.DELIVERED}};r.orderListType===d.ORDER_LIST.COMPLETED&&(n.status=d.ORDER_HISTORY.DELIVERED);const o=yield l.default.aggregate([{$lookup:{from:"orderAssign",localField:"orderId",foreignField:"order",as:"orderAssignInfo",pipeline:[{$project:{_id:0,deliveryBoy:1,status:1}}]}},{$unwind:{path:"$orderAssignInfo",preserveNullAndEmptyArrays:!0}},{$match:n},{$sort:{createdAt:1}},{$lookup:{from:"country",localField:"country",foreignField:"_id",as:"countryData"}},{$unwind:{path:"$countryData",preserveNullAndEmptyArrays:!0}},{$lookup:{from:"city",localField:"city",foreignField:"_id",as:"cityData"}},{$unwind:{path:"$cityData",preserveNullAndEmptyArrays:!0}},{$lookup:{from:"users",localField:"merchant",foreignField:"_id",as:"userData"}},{$unwind:{path:"$userData",preserveNullAndEmptyArrays:!0}},{$lookup:{from:"deliveryMan",localField:"orderAssignData.deliveryBoy",foreignField:"_id",as:"deliveryManData",pipeline:[{$project:{_id:0,name:1}}]}},{$unwind:{path:"$deliveryManData",preserveNullAndEmptyArrays:!0}},{$project:{_id:0,orderId:1,createdAt:1,customerName:"$userData.name",pickupAddress:"$pickupDetails.address",deliveryAddress:"$deliveryDetails.address",deliveryMan:"$deliveryManData.name",pickupDate:"$pickupDetails.orderTimestamp",deliveryDate:"$deliveryDetails.orderTimestamp",pickupRequest:"$pickupDetails.request",postCode:"$pickupDetails.postCode"}},...(0,f.getMongoCommonPagination)({pageCount:r.pageCount,pageLimit:r.pageLimit})]);return t.ok({data:o})}catch(e){return t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.getDeliveryManInfo=(e,t)=>r(void 0,void 0,void 0,(function*(){try{Object.assign(e.params,e.query);const a=(0,m.default)(e.params,h.orderWiseDeliveryManValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield l.default.aggregate([{$match:{orderId:r.orderId}},{$lookup:{from:"deliveryMan",localField:"city",foreignField:"cityId",as:"deliveryMans"}},{$unwind:{path:"$deliveryMans",preserveNullAndEmptyArrays:!0}},{$replaceRoot:{newRoot:"$deliveryMans"}},{$lookup:{from:"city",localField:"cityId",foreignField:"_id",as:"cityData"}},{$unwind:{path:"$cityData",preserveNullAndEmptyArrays:!0}},{$project:{deliveryManId:"$_id",deliveryManName:"$name",city:"$cityData.cityName"}},...(0,f.getMongoCommonPagination)({pageCount:r.pageCount,pageLimit:r.pageLimit})]);return t.ok({data:n[0]})}catch(e){return t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.getDeliveryManNames=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,m.default)(e.query,h.paginationValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield s.default.aggregate([{$project:{deliveryManId:"$_id",deliveryManName:"$name"}},...(0,f.getMongoCommonPagination)({pageCount:r.pageCount,pageLimit:r.pageLimit})]);return t.ok({data:n[0]})}catch(e){return t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.getUserNames=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,m.default)(e.query,h.paginationValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield c.default.aggregate([{$project:{userId:"$_id",userName:"$name"}},...(0,f.getMongoCommonPagination)({pageCount:r.pageCount,pageLimit:r.pageLimit})]);return t.ok({data:n})}catch(e){return t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.getDeliveryManWalletHistory=(e,t)=>r(void 0,void 0,void 0,(function*(){try{Object.assign(e.params,e.query);const a=(0,m.default)(e.params,h.deliveryManWalletListValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield g.default.aggregate([{$match:{personId:new i.default.Types.ObjectId(r.deliveryManId),userFlag:d.PERSON_TYPE.DELIVERY_BOY,type:r.transactionType}},{$sort:{createdAt:-1}},{$lookup:{from:"deliveryMan",localField:"personId",foreignField:"_id",as:"deliveryManData",pipeline:[{$project:{_id:0,name:1}}]}},{$unwind:{path:"$deliveryManData",preserveNullAndEmptyArrays:!0}},{$project:{_id:0,walletId:"$_id",name:"$deliveryManData.name",amount:1,availableBalance:1,createdAt:1,status:1}},...(0,f.getMongoCommonPagination)({pageCount:r.pageCount,pageLimit:r.pageLimit})]);return t.ok({data:n})}catch(e){return t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.getUserWithdrawHistory=(e,t)=>r(void 0,void 0,void 0,(function*(){try{Object.assign(e.params,e.query);const a=(0,m.default)(e.params,h.userWalletListValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield g.default.aggregate([{$match:{userFlag:d.PERSON_TYPE.CUSTOMER,type:d.TRANSACTION_TYPE.WITHDRAW,status:r.transactionStatus}},{$sort:{createdAt:-1}},{$lookup:{from:"users",localField:"personId",foreignField:"_id",as:"userData",pipeline:[{$project:{_id:0,name:1}}]}},{$unwind:{path:"$userData",preserveNullAndEmptyArrays:!0}},{$project:{_id:0,walletId:"$_id",name:"$userData.name",amount:1,availableBalance:1,createdAt:1,type:1,status:1}},...(0,f.getMongoCommonPagination)({pageCount:r.pageCount,pageLimit:r.pageLimit})]);return t.ok({data:n})}catch(e){return t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.addDeliveryMan=(e,t)=>r(void 0,void 0,void 0,(function*(){var a;try{const n=(0,m.default)(e.body,p.deliveryManSignUpValidation);if(!n.isValid)return t.badRequest({message:n.message});const{value:i}=n;if(yield s.default.findOne({email:i.email}))return t.badRequest({message:(0,o.getLanguage)("en").emailRegisteredAlready});i.password=yield(0,v.encryptPassword)({password:i.password});const d=yield s.default.create(Object.assign(Object.assign({},i),{createdByAdmin:!0,isVerified:!0}));if((null===(a=i.documents)||void 0===a?void 0:a.length)>0){const e=yield Promise.all(i.documents.map(((e,t)=>r(void 0,void 0,void 0,(function*(){const a=e.image.split(",");return{document:e.documentId,image:yield(0,v.uploadFile)(a[0],a[1],`DOCUMENT-${t}-`),documentNumber:e.documentNumber,deliveryManId:d._id}})))));yield y.default.insertMany(e)}return t.ok({message:(0,o.getLanguage)("en").userRegistered,data:d})}catch(e){return console.log("ðŸš€ ~ addDeliveryMan ~ error:",e),t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.deleteDeliveryMan=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const{deliveryManId:a}=e.params;return a?(yield s.default.findById(a))?(yield s.default.deleteOne({_id:a}),yield y.default.deleteMany({deliveryManId:a}),t.ok({message:(0,o.getLanguage)("en").deliveryBoysDeleted})):t.badRequest({message:(0,o.getLanguage)("en").deliveryManNotFound}):t.badRequest({message:(0,o.getLanguage)("en").invalidDeliveryMan})}catch(e){return console.log("ðŸš€ ~ deleteDeliveryMan ~ error:",e),t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}}))},3812:function(e,t,a){var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getDocuments=t.deleteDocument=t.updateDocument=t.createDocument=void 0;const i=a(4473),d=n(a(8001)),o=a(2581),s=n(a(8229)),u=a(9975),l=a(5510);t.createDocument=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,s.default)(e.body,l.createDocumentValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;return(yield d.default.findOne({name:r.name}))?t.badRequest({message:(0,i.getLanguage)("en").errorDocumentAlreadyExist}):(yield d.default.create(r),t.ok({message:(0,i.getLanguage)("en").documentCreated}))}catch(e){return t.failureResponse({message:(0,i.getLanguage)("en").somethingWentWrong})}})),t.updateDocument=(e,t)=>r(void 0,void 0,void 0,(function*(){try{e.body.documentId=e.params.documentId;const a=(0,s.default)(e.body,l.updateDocumentValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;return(yield d.default.findById(r.documentId))?(yield d.default.updateOne({_id:r.documentId},{$set:{name:r.name,isRequired:r.isRequired}}),t.ok({message:(0,i.getLanguage)("en").documentUpdated})):t.badRequest({message:(0,i.getLanguage)("en").errorDocumentNotFound})}catch(e){return t.failureResponse({message:(0,i.getLanguage)("en").somethingWentWrong})}})),t.deleteDocument=(e,t)=>r(void 0,void 0,void 0,(function*(){try{e.params.status=e.query.status;const a=(0,s.default)(e.params,l.deleteDocumentValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;return(yield d.default.findById(r.documentId))?(yield d.default.updateOne({_id:r.documentId},{$set:{status:r.status}}),t.ok({message:(0,i.getLanguage)("en").documentUpdated})):t.badRequest({message:(0,i.getLanguage)("en").errorDocumentNotFound})}catch(e){return t.failureResponse({message:(0,i.getLanguage)("en").somethingWentWrong})}})),t.getDocuments=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,s.default)(e.query,u.paginationValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;return t.ok({data:(yield d.default.aggregate([{$project:{name:1,isRequired:1,isEnable:"$status"}},...(0,o.getMongoCommonPagination)({pageCount:r.pageCount,pageLimit:r.pageLimit})]))[0]})}catch(e){return t.failureResponse({message:(0,i.getLanguage)("en").somethingWentWrong})}}))},7898:function(e,t,a){var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getExtraCharges=t.deleteExtraCharge=t.updateExtraCharges=t.createExtraCharges=void 0;const i=a(4473),d=n(a(279)),o=a(2581),s=n(a(8229)),u=a(9975),l=a(9680);t.createExtraCharges=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,s.default)(e.body,l.createExtraChargesValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;return yield d.default.create(r),t.ok({})}catch(e){return t.failureResponse({message:(0,i.getLanguage)("en").somethingWentWrong})}})),t.updateExtraCharges=(e,t)=>r(void 0,void 0,void 0,(function*(){try{Object.assign(e.body,e.params);const a=(0,s.default)(e.body,l.updateExtraChargesValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;return(yield d.default.findById(r.extraChargeId))?(yield d.default.updateOne({_id:r.extraChargeId},{$set:r}),t.ok({})):t.badRequest({message:(0,i.getLanguage)("en").errorDataNotFound})}catch(e){return t.failureResponse({message:(0,i.getLanguage)("en").somethingWentWrong})}})),t.deleteExtraCharge=(e,t)=>r(void 0,void 0,void 0,(function*(){try{Object.assign(e.params,e.body);const a=(0,s.default)(e.params,l.deleteExtraChargesValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;return(yield d.default.findById(r.extraChargeId))?(yield d.default.updateOne({_id:r.extraChargeId},{$set:r}),t.ok({})):t.badRequest({message:(0,i.getLanguage)("en").errorDataNotFound})}catch(e){return t.failureResponse({message:(0,i.getLanguage)("en").somethingWentWrong})}})),t.getExtraCharges=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,s.default)(e.query,u.paginationValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield d.default.aggregate([{$sort:{createdAt:-1}},{$lookup:{from:"country",localField:"country",foreignField:"_id",as:"countryData",pipeline:[{$project:{_id:0,name:1}}]}},{$unwind:{path:"$countryData",preserveNullAndEmptyArrays:!0}},{$lookup:{from:"city",localField:"city",foreignField:"_id",as:"cityData",pipeline:[{$project:{_id:0,name:1}}]}},{$unwind:{path:"$cityData",preserveNullAndEmptyArrays:!0}},{$project:{_id:0,extraChargeId:"$_id",title:1,charge:1,chargeType:1,country:"$countryData.countryName",city:"$cityData.cityName",status:"$status",createdDate:"$createdAt"}},...(0,o.getMongoCommonPagination)({pageCount:r.pageCount,pageLimit:r.pageLimit})]);return t.ok({data:n})}catch(e){return t.failureResponse({message:(0,i.getLanguage)("en").somethingWentWrong})}}))},7687:function(e,t,a){var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getAllOrders=t.getOrders=t.assignOrder=void 0;const i=n(a(6037)),d=a(3503),o=a(4473),s=n(a(8670)),u=n(a(1042)),l=n(a(8335)),c=a(2581),g=n(a(8229)),f=a(8427);t.assignOrder=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,g.default)(e.body,f.orderAssignValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield u.default.findOne({orderId:r.orderId,status:d.ORDER_HISTORY.CREATED});return n?n.status===d.ORDER_HISTORY.DRAFT?t.badRequest({message:(0,o.getLanguage)("en").invalidOrder}):(yield s.default.findById(r.deliveryManId))?(yield l.default.findOne({order:r.orderId,deliveryBoy:r.deliveryManId}))?t.badRequest({message:(0,o.getLanguage)("en").orderAlreadyAssigned}):(yield l.default.create({order:r.orderId,deliveryBoy:r.deliveryManId,merchant:n.merchant}),t.ok({message:(0,o.getLanguage)("en").orderAssignedSuccessfully})):t.badRequest({message:(0,o.getLanguage)("en").deliveryManNotFound}):t.badRequest({message:(0,o.getLanguage)("en").invalidOrder})}catch(e){return t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.getOrders=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,g.default)(e.query,f.orderAdminListValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n={};r.user&&(n.merchant=new i.default.Types.ObjectId(r.user)),r.status&&(n.status=r.status),r.orderId&&(n.orderId=r.orderId);const d=yield u.default.aggregate([{$match:n},{$sort:{createdAt:1}},{$addFields:Object.assign({},r.date&&{createdDate:{$dateToString:{format:"%Y-%m-%d",date:"$createdAt"}}})},{$match:Object.assign({},r.date&&{createdDate:r.date})},{$lookup:{from:"orderAssign",localField:"orderId",foreignField:"order",as:"orderAssignData",pipeline:[{$match:Object.assign({},r.deliveryMan&&{deliveryBoy:new i.default.Types.ObjectId(r.deliveryMan)})},{$project:{_id:0,deliveryBoy:1}}]}},{$unwind:{path:"$orderAssignData",preserveNullAndEmptyArrays:!0}},{$lookup:{from:"users",localField:"merchant",foreignField:"_id",as:"userData",pipeline:[{$project:{_id:0,name:1}}]}},{$unwind:{path:"$userData",preserveNullAndEmptyArrays:!0}},{$lookup:{from:"deliveryMan",localField:"orderAssignData.deliveryBoy",foreignField:"_id",as:"deliveryManData",pipeline:[{$project:{_id:0,name:1}}]}},{$unwind:{path:"$deliveryManData",preserveNullAndEmptyArrays:!0}},{$project:{_id:0,orderId:1,customerName:"$userData.name",pickupAddress:"$pickupDetails.address",deliveryAddress:"$deliveryDetails.address",deliveryMan:"$deliveryManData.name",pickupDate:"$pickupDetails.orderTimestamp",deliveryDate:"$deliveryDetails.orderTimestamp",createdDate:"$createdAt",pickupRequest:"$pickupDetails.request",postCode:"$pickupDetails.postCode"}},...(0,c.getMongoCommonPagination)({pageCount:r.pageCount,pageLimit:r.pageLimit})]);return t.ok({data:d[0]})}catch(e){return t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.getAllOrders=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const e=yield u.default.aggregate([{$sort:{createdAt:-1}},{$match:{merchant:{$exists:!1}}},{$lookup:{from:"orderAssign",localField:"orderId",foreignField:"order",as:"orderAssignData",pipeline:[{$project:{_id:0,deliveryBoy:1}}]}},{$unwind:{path:"$orderAssignData",preserveNullAndEmptyArrays:!0}},{$lookup:{from:"users",localField:"merchant",foreignField:"_id",as:"userData",pipeline:[{$project:{_id:0,name:1}}]}},{$unwind:{path:"$userData",preserveNullAndEmptyArrays:!0}},{$lookup:{from:"deliveryMan",localField:"orderAssignData.deliveryBoy",foreignField:"_id",as:"deliveryManData",pipeline:[{$project:{_id:0,name:1}}]}},{$unwind:{path:"$deliveryManData",preserveNullAndEmptyArrays:!0}},{$project:{_id:1,orderId:1,customerName:"$userData.name",pickupAddress:"$pickupDetails",deliveryAddress:"$deliveryDetails",deliveryMan:"$deliveryManData.name",pickupDate:"$pickupDetails.orderTimestamp",deliveryDate:"$deliveryDetails.orderTimestamp",createdDate:"$createdAt",pickupRequest:"$pickupDetails.request",postCode:"$pickupDetails.postCode",status:1}}]);return t.ok({data:e})}catch(e){return t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}}))},7412:function(e,t,a){var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getParcelTypes=t.deleteParcelType=t.updateParcelTypes=t.createParcelTypes=void 0;const i=a(4473),d=n(a(5541)),o=a(2581),s=n(a(8229)),u=a(9975);t.createParcelTypes=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,s.default)(e.body,u.createParcelValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;return(yield d.default.findOne({label:{$regex:r.label,$options:"i"}}))?t.badRequest({message:(0,i.getLanguage)("en").errorParcelTypeAlreadyRegistered}):(yield d.default.create(r),t.ok({}))}catch(e){return t.failureResponse({message:(0,i.getLanguage)("en").somethingWentWrong})}})),t.updateParcelTypes=(e,t)=>r(void 0,void 0,void 0,(function*(){try{Object.assign(e.body,e.params);const a=(0,s.default)(e.body,u.updateParcelValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;return(yield d.default.findById(r.parcelTypeId))?(yield d.default.updateOne({_id:r.parcelTypeId},{$set:r}),t.ok({})):t.badRequest({message:(0,i.getLanguage)("en").errorDataNotFound})}catch(e){return t.failureResponse({message:(0,i.getLanguage)("en").somethingWentWrong})}})),t.deleteParcelType=(e,t)=>r(void 0,void 0,void 0,(function*(){try{Object.assign(e.params,e.body);const a=(0,s.default)(e.params,u.deleteParcelValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;return(yield d.default.findById(r.parcelTypeId))?(yield d.default.updateOne({_id:r.parcelTypeId},{$set:r}),t.ok({})):t.badRequest({message:(0,i.getLanguage)("en").errorDataNotFound})}catch(e){return t.failureResponse({message:(0,i.getLanguage)("en").somethingWentWrong})}})),t.getParcelTypes=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,s.default)(e.query,u.paginationValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield d.default.aggregate([{$sort:{createdAt:-1}},{$project:{_id:0,parcelTypeId:"$_id",label:1,status:"$status",createdDate:"$createdAt"}},...(0,o.getMongoCommonPagination)({pageCount:r.pageCount,pageLimit:r.pageLimit})]);return t.ok({data:n})}catch(e){return t.failureResponse({message:(0,i.getLanguage)("en").somethingWentWrong})}}))},7923:function(e,t,a){var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.addUser=t.getAllUsersFromAdmin=t.getAllUsers=t.getUsers=t.getPendingSubscription=t.acceptSubscription=t.getApproveSubscription=t.deletePurchaseSubscription=t.deleteSubscription=t.getSubscriptions=t.manageSubscriptions=void 0;const i=a(3503),d=a(4473),o=n(a(1186)),s=n(a(4283)),u=n(a(8815)),l=a(2581),c=n(a(8229)),g=a(9975),f=a(2581),m=a(9475);t.manageSubscriptions=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,c.default)(e.body,g.manageSubscriptionValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;if(r.subscriptionId){if(!(yield o.default.findById(r.subscriptionId)))return t.badRequest({message:(0,d.getLanguage)("en").subcriptionDataNotFound});yield o.default.updateOne({_id:r.subscriptionId},{$set:Object.assign(Object.assign({},r),r.days&&{seconds:86400*r.days})})}else{if(r.seconds=86400*r.days,yield o.default.findOne(r))return t.badRequest({message:(0,d.getLanguage)("en").subcriptionAlreadyCreated});yield o.default.create(r)}return t.ok({message:(0,d.getLanguage)("en").dataUpdatedSuccessfully})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.getSubscriptions=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,c.default)(e.query,g.paginationValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;return t.ok({data:yield o.default.find().sort({seconds:1,amount:1}).skip((r.pageCount-1)*r.pageLimit).limit(r.pageLimit)})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.deleteSubscription=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,c.default)(e.params,g.subscription);if(!a.isValid)return t.badRequest({message:a.message});const{id:r}=a.value,n=yield o.default.findByIdAndDelete(r);return n?t.ok({message:"Subscription deleted successfully",data:n}):t.badRequest({message:"Subscription not found or already deleted"})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.deletePurchaseSubscription=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,c.default)(e.params,g.subscription);if(!a.isValid)return t.badRequest({message:a.message});const{id:r}=a.value,n=yield s.default.findByIdAndDelete(r);return n?t.ok({message:"Subscription deleted successfully",data:n}):t.badRequest({message:"Subscription not found or already deleted"})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.getApproveSubscription=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const e=yield s.default.find({status:"APPROVED"});t.status(200).json({data:e})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.acceptSubscription=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,c.default)(e.body,g.subcriptionStatusValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield s.default.findOne({_id:r.subscriptionId,status:i.SUBCRIPTION_REQUEST.PENDING});if(!n)return t.badRequest({message:(0,d.getLanguage)("en").errorActivation});const u={status:i.SUBCRIPTION_REQUEST.PENDING},l=yield o.default.findById(n.subcriptionId);return yield s.default.updateOne(u,{$set:{status:r.subscriptionStatus,expiry:Date.now()+1e3*l.seconds}}),t.ok({})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.getPendingSubscription=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,c.default)(e.query,g.paginationValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield u.default.aggregate([{$lookup:{from:"subcriptionPurchase",localField:"_id",foreignField:"merchant",as:"subcriptionData",pipeline:[{$match:{expiry:{$gte:new Date},status:i.SUBCRIPTION_REQUEST.PENDING}},{$project:{_id:1,status:1,createdAt:1}}]}},{$unwind:{path:"$subcriptionData",preserveNullAndEmptyArrays:!0}},{$match:{subcriptionData:{$exists:!0}}},{$project:{_id:0,userId:"$_id",userName:"$name",medicalCertificate:1,medicalCertificateNumber:1,subcriptionId:"$subcriptionData._id",subcriptionStatus:"$subcriptionData.status",subcriptionCreatedAt:"$subcriptionData.createdAt"}},...(0,l.getMongoCommonPagination)({pageCount:r.pageCount,pageLimit:r.pageLimit})]);return t.ok({data:n})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.getUsers=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,c.default)(e.query,g.subcriptionStatusListValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;r.isSubscribed="true"===r.isSubscribed;const n=yield u.default.aggregate([{$lookup:{from:"subcriptionPurchase",localField:"_id",foreignField:"merchant",as:"subcriptionData",pipeline:[{$match:Object.assign(Object.assign({},r.isSubscribed&&{expiry:{$gte:new Date}}),{status:r.isSubscribed?i.SUBCRIPTION_REQUEST.APPROVED:{$in:Object.keys(i.SUBCRIPTION_REQUEST)}})},{$project:{_id:1,createdAt:-1}}]}},{$unwind:{path:"$subcriptionData",preserveNullAndEmptyArrays:!0}},{$match:{"subcriptionData._id":{$exists:r.isSubscribed}}},{$sort:{"subcriptionData.createdAt":-1}},{$project:{_id:0,userId:"$_id",userName:"$name",registerDate:"$createdAt",contactNumber:1,countryCode:1,country:1,city:1,email:1,medicalCertificateNumber:1,status:1,isVerified:1}},...(0,l.getMongoCommonPagination)({pageCount:r.pageCount,pageLimit:r.pageLimit})]);return t.ok({data:n})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.getAllUsers=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const e=yield u.default.aggregate([{$sort:{createdAt:-1}},{$project:{_id:1,userName:"$name",registerDate:"$createdAt",contactNumber:1,countryCode:1,address:1,email:1,medicalCertificateNumber:1,status:1,isVerified:1,createdByAdmin:1}}]);return t.ok({data:e})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.getAllUsersFromAdmin=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const e=yield u.default.aggregate([{$match:{createdByAdmin:!0}},{$sort:{createdAt:-1}},{$project:{_id:1,userName:"$name",registerDate:"$createdAt",contactNumber:1,countryCode:1,address:1,email:1,medicalCertificateNumber:1,status:1,isVerified:1,createdByAdmin:1}}]);return t.ok({data:e})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.addUser=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,c.default)(e.body,m.userSignUpValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;if(yield u.default.findOne({email:r.email}))return t.badRequest({message:(0,d.getLanguage)("en").emailRegisteredAlready});if(r.image){const e=r.image.split(",");r.image=yield(0,f.uploadFile)(e[0],e[1],"MERCHANT(USER)-PROFILE")}else r.image=process.env.DEFAULT_PROFILE_IMAGE;return r.password=yield(0,f.encryptPassword)({password:r.password}),yield u.default.create(Object.assign(Object.assign({},r),{createdByAdmin:!0,isVerified:!0})),t.ok({message:(0,d.getLanguage)("en").userRegistered})}catch(e){return console.log("ðŸš€ ~ merchant ~ error:",e),t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}}))},7319:function(e,t,a){var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getVehiclesForAll=t.getVehicles=t.deleteVehicle=t.updateVehicle=t.createVehicle=void 0;const i=a(3503),d=a(4473),o=n(a(7406)),s=a(2581),u=n(a(8229)),l=a(9975),c=a(4111);t.createVehicle=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,u.default)(e.body,c.createVehicleValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=r.image.split(",");return r.image=yield(0,s.uploadFile)(n[0],n[1],"VEHICLE"),r.cityType=r.cityWise,yield o.default.create(r),t.ok({})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.updateVehicle=(e,t)=>r(void 0,void 0,void 0,(function*(){try{Object.assign(e.body,e.params);const a=(0,u.default)(e.body,c.updateVehicleValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield o.default.findById(r.vehicleId);if(!n)return t.badRequest({message:(0,d.getLanguage)("en").errorDataNotFound});if(r.cityWise===i.VEHICLE_CITY_TYPE.CITY_WISE&&!r.city)return t.ok({message:(0,d.getLanguage)("en").errorCityFieldRequired});if(r.cityWise===i.VEHICLE_CITY_TYPE.ALL&&(r.city=[]),r.image){(0,s.removeUploadedFile)(n.image);const e=r.image.split(",");r.image=yield(0,s.uploadFile)(e[0],e[1],"VEHICLE")}return r.cityWise&&(r.cityType=r.cityWise),yield o.default.updateOne({_id:r.vehicleId},{$set:r}),t.ok({})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.deleteVehicle=(e,t)=>r(void 0,void 0,void 0,(function*(){try{Object.assign(e.params,e.body);const a=(0,u.default)(e.params,c.deleteVehicleValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;return(yield o.default.findById(r.vehicleId))?(yield o.default.updateOne({_id:r.vehicleId},{$set:r}),t.ok({})):t.badRequest({message:(0,d.getLanguage)("en").errorDataNotFound})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.getVehicles=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,u.default)(e.query,l.paginationValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield o.default.aggregate([{$sort:{createdAt:-1}},{$project:{_id:0,vehicleId:"$_id",vehicleImage:"$image",vehicleName:"$name",vehicleSize:"$size",vehicleCapacity:"$capacity",status:"$status",createdDate:"$createdAt"}},...(0,s.getMongoCommonPagination)({pageCount:r.pageCount,pageLimit:r.pageLimit})]);return t.ok({data:n})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.getVehiclesForAll=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const e=yield o.default.aggregate([{$sort:{createdAt:-1}},{$project:{_id:0,vehicleId:"$_id",vehicleImage:"$image",vehicleName:"$name",vehicleSize:"$size",vehicleCapacity:"$capacity",status:"$status",createdDate:"$createdAt"}}]);return t.ok({data:e})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}}))},7018:function(e,t,a){var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteCustomerById=t.moveToTrashCustomer=t.getCountries=t.getCities=t.getCustomers=t.updateCustomer=t.createCustomer=void 0;const i=n(a(3234)),d=a(4473),o=n(a(7591)),s=n(a(9040)),u=n(a(8229)),l=a(9475);t.createCustomer=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,u.default)(e.body,l.customerSignUpValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;if(yield i.default.findOne({email:r.email}))return t.badRequest({message:(0,d.getLanguage)("en").emailRegisteredAlready});const n=yield i.default.create(Object.assign({},r));return console.log(n),t.ok({message:(0,d.getLanguage)("en").userRegistered,data:n})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.updateCustomer=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,u.default)(e.body,l.customerUpdateValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield i.default.findById(e.params.id);return n?r.email&&r.email!==n.email&&(yield i.default.findOne({email:r.email}))?t.badRequest({message:(0,d.getLanguage)("en").emailRegisteredAlready}):(Object.assign(n,r),r.location&&(n.location={type:"Point",coordinates:[r.location.longitude,r.location.latitude]}),yield n.save(),t.ok({message:(0,d.getLanguage)("en").customerUpdated,data:n})):t.badRequest({message:(0,d.getLanguage)("en").customerNotFound})}catch(e){return console.error("Error updating customer:",e),t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.getCustomers=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const e=yield i.default.aggregate([{$lookup:{from:"country",localField:"country",foreignField:"_id",as:"countryData"}},{$unwind:{path:"$countryData",preserveNullAndEmptyArrays:!0}},{$lookup:{from:"city",localField:"city",foreignField:"_id",as:"cityData"}},{$unwind:{path:"$cityData",preserveNullAndEmptyArrays:!0}},{$project:{_id:1,cityId:"$cityData._id",city:"$city",country:"$country",countryName:"$countryData.countryName",address:"$address",firstName:{$ifNull:["$firstName",""]},lastName:{$ifNull:["$lastName",""]},email:"$email",mobileNumber:"$mobileNumber",postCode:"$postCode",location:"$location",createdDate:"$createdAt",customerId:1,trashed:{$ifNull:["$trashed",!1]}}}]);return t.ok({data:e})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.getCities=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const e=yield o.default.aggregate([{$lookup:{from:"country",localField:"countryID",foreignField:"_id",as:"countryData",pipeline:[{$project:{_id:0,countryName:1,currency:1}}]}},{$unwind:{path:"$countryData",preserveNullAndEmptyArrays:!0}},{$lookup:{from:"ProductCharges",localField:"_id",foreignField:"cityId",as:"productChargeData",pipeline:[{$match:{isCustomer:!1}}]}},{$unwind:{path:"$productChargeData",preserveNullAndEmptyArrays:!0}},{$project:{_id:0,cityId:"$_id",cityName:"$cityName",countryID:1,countryName:"$countryData.countryName",currency:"$countryData.currency",productChargeId:"$productChargeData._id",minimumDistance:"$productChargeData.minimumDistance",minimumWeight:"$productChargeData.minimumWeight",cancelCharge:"$productChargeData.cancelCharge",perDistanceCharge:"$productChargeData.perDistanceCharge",perWeightCharge:"$productChargeData.perWeightCharge",adminCommission:"$productChargeData.adminCommission",commissionType:"$productChargeData.commissionType",createdDate:"$createdAt",isActive:1}}]);return t.ok({data:e})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.getCountries=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const e=yield s.default.aggregate([{$project:{_id:0,countryId:"$_id",countryName:"$countryName",distanceType:1,weightType:1,createdDate:"$createdAt",isActive:1}}]);return t.ok({data:e})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.moveToTrashCustomer=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const{id:a}=e.params;if(!a)return t.badRequest({message:(0,d.getLanguage)("en").invalidcustomer});const r=yield i.default.findById(a),n=!0!==r.trashed;return r?(yield i.default.findByIdAndUpdate(a,{trashed:n}),t.ok({message:n?(0,d.getLanguage)("en").customerMoveToTrash:(0,d.getLanguage)("en").customerUndoToTrash})):t.badRequest({message:(0,d.getLanguage)("en").customerNotFound})}catch(e){return console.log("ðŸš€ ~ deleteDeliveryMan ~ error:",e),t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.deleteCustomerById=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const{id:a}=e.params;return a?(yield i.default.findByIdAndDelete(a))?t.ok({message:"Customer deleted successfully."}):t.badRequest({message:"Customer not found."}):t.badRequest({message:"Customer ID is required."})}catch(e){return console.error("Error deleting customer:",e),t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}}))},2008:function(e,t,a){var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.moveToTrashDeliveryMan=t.updateDeliveryManProfile=t.deleteDeliveryMan=t.getDeliveryManProfile=t.updateLocation=t.getDeliveryBoysForMerchant=t.updateDeliveryManStatus=t.updatePassword=t.signUp=t.verifyPassword=void 0;const i=n(a(6037)),d=a(3503),o=a(4473),s=n(a(8670)),u=n(a(7501)),l=n(a(8001)),c=n(a(5293)),g=a(2581),f=n(a(8229)),m=a(9475),p=a(9475),y=a(1883),v=n(a(5486));t.verifyPassword=e=>r(void 0,[e],void 0,(function*({password:e,hash:t}){return v.default.compare(e,t)})),t.signUp=(e,t)=>r(void 0,void 0,void 0,(function*(){var a;try{const n=(0,f.default)(e.body,m.deliveryManSignUpValidation);if(!n.isValid)return t.badRequest({message:n.message});const{value:i}=n;if(console.log(i),i.image){const e=i.image.split(",");i.image=yield(0,g.uploadFile)(e[0],e[1],"DELIVERYMAN-PROFILE")}else i.image=process.env.DEFAULT_PROFILE_IMAGE;const p=!!i.merchantId;let y=yield l.default.find({isRequired:!0,status:d.SWITCH.ENABLE});if(!p&&y.length!==i.documents.length)return t.badRequest({message:(0,o.getLanguage)("en").errorDocumentMissing});if(!p&&i.documents.length>0&&(y=yield l.default.find({_id:{$in:i.documents.map((e=>e.documentId))}}),0===(null==y?void 0:y.length)))return t.badRequest({message:(0,o.getLanguage)("en").errorInvalidDocument});if(yield s.default.findOne({email:i.email}))return t.badRequest({message:(0,o.getLanguage)("en").emailRegisteredAlready});if(!p&&(null==i?void 0:i.otp)&&!(yield c.default.findOne({value:i.otp,customerEmail:i.email,expiry:{$gte:Date.now()}})))return t.badRequest({message:(0,o.getLanguage)("en").otpExpired});i.password=yield(0,g.encryptPassword)({password:i.password});const v=yield s.default.create(Object.assign(Object.assign({},i),{createdByMerchant:p,isVerified:!!p}));if((null===(a=i.documents)||void 0===a?void 0:a.length)>0){const e=yield Promise.all(i.documents.map(((e,t)=>r(void 0,void 0,void 0,(function*(){const a=e.image.split(",");return{document:e.documentId,image:yield(0,g.uploadFile)(a[0],a[1],`DOCUMENT-${t}-`),documentNumber:e.documentNumber,deliveryManId:v._id}})))));yield u.default.insertMany(e)}return t.ok({message:(0,o.getLanguage)("en").userRegistered,data:v})}catch(e){return console.log("ðŸš€ ~ signUp ~ error:",e),t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.updatePassword=(e,a)=>r(void 0,void 0,void 0,(function*(){try{const r=(0,f.default)(e.body,p.updatePasswordValidation);if(!r.isValid)return a.badRequest({message:r.message});const{value:n}=r;if(n.newPassword!==n.confirmPassword)return a.badRequest({message:(0,o.getLanguage)("en").passwordMismatch});const i=yield s.default.findOne({contactNumber:n.contactNumber});if(!i)return a.badRequest({message:(0,o.getLanguage)("en").userNotFound});if(!(yield(0,t.verifyPassword)({password:n.oldPassword,hash:i.password})))return a.badRequest({message:(0,o.getLanguage)("en").invalidOldPassword});const d=yield(0,g.encryptPassword)({password:n.newPassword});return yield s.default.updateOne({_id:i._id},{$set:{password:d}}),a.ok({message:(0,o.getLanguage)("en").passwordUpdated})}catch(e){return console.log("ðŸš€ ~ updatePassword ~ error:",e),a.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.updateDeliveryManStatus=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const{id:a}=e.params,{status:r}=e.body;if(![d.SWITCH.ENABLE,d.SWITCH.DISABLE].includes(r))return t.badRequest({message:"Invalid status value."});const n=yield s.default.findById(a);return n?(n.status=r,yield n.save(),t.ok({message:"Status updated successfully.",data:n})):t.status(404).json({message:"Delivery man not found."})}catch(e){return console.log("ðŸš€ ~ updateDeliveryManStatus ~ error:",e),t.failureResponse({message:"Something went wrong while updating the status."})}})),t.getDeliveryBoysForMerchant=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=e.params.merchantId,r=yield s.default.find({createdByMerchant:!0,merchantId:a});return r&&0!==r.length?t.ok({message:(0,o.getLanguage)("en").deliveryBoysFetched,data:r}):t.badRequest({message:(0,o.getLanguage)("en").noDeliveryBoysFound})}catch(e){return console.log("ðŸš€ ~ getDeliveryBoysForMerchant ~ error:",e),t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.updateLocation=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,f.default)(e.body,y.updateLocationValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;return yield s.default.updateOne({_id:e.id},{$set:{countryId:r.country,cityId:r.city,location:{type:"Point",coordinates:[r.location.longitude,r.location.latitude]}}}),t.ok({})}catch(e){return t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.getDeliveryManProfile=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(yield s.default.aggregate([{$match:{_id:new i.default.Types.ObjectId(e.params.id)}},{$project:{_id:0,cityId:"$cityData._id",cityName:"$cityData.cityName",countryID:"$countryData._id",countryName:"$countryData.countryName",address:"$address",firstName:{$ifNull:["$firstName",{$ifNull:[{$arrayElemAt:[{$split:["$name"," "]},0]},""]}]},lastName:{$ifNull:["$lastName",{$ifNull:[{$arrayElemAt:[{$split:["$name"," "]},1]},""]}]},email:"$email",contactNumber:"$contactNumber",image:"$image",countryCode:"$countryCode",status:"$status",isVerified:"$isVerified",createdDate:"$createdAt"}},{$sort:{createdAt:-1}}]))[0];return t.ok({data:a})}catch(e){return t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.deleteDeliveryMan=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const{id:a}=e.params;if(!i.default.Types.ObjectId.isValid(a))return t.failureResponse({message:"Invalid delivery man ID."});const r=yield s.default.findByIdAndDelete(a);return r?t.ok({message:"Delivery man deleted successfully.",data:r}):t.failureResponse({message:"Delivery man not found."})}catch(e){return console.error("Error deleting delivery man:",e),t.failureResponse({message:"Something went wrong. Please try again."})}})),t.updateDeliveryManProfile=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const{id:a}=e.params,r=e.body;if(null==r?void 0:r.image){const e=r.image.split(","),t=yield s.default.findOne({_id:a},{image:1});(null==t?void 0:t.image)&&(0,g.removeUploadedFile)(t.image),r.image=yield(0,g.uploadFile)(e[0],e[1],"DELIVERYMAN-PROFILE")}const n=yield s.default.findByIdAndUpdate(a,r,{new:!0,runValidators:!0});return n?t.ok({message:(0,o.getLanguage)("en").dataUpdatedSuccessfully,data:n}):t.badRequest({message:(0,o.getLanguage)("en").deliveryManNotFound})}catch(e){return console.error("Error updating delivery man profile:",e),t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.moveToTrashDeliveryMan=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const{id:a}=e.params;if(!a)return t.badRequest({message:(0,o.getLanguage)("en").invalidDeliveryMan});const r=yield s.default.findById(a);if(!r)return t.badRequest({message:(0,o.getLanguage)("en").deliveryManNotFound});const n=!0!==r.trashed;return yield s.default.findByIdAndUpdate(a,{trashed:n}),t.ok({message:n?(0,o.getLanguage)("en").deliveryManMoveToTrash:(0,o.getLanguage)("en").deliveryManUndoToTrash})}catch(e){return console.log("ðŸš€ ~ moveToTrashDeliveryMan ~ error:",e),t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}}))},160:function(e,t,a){var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getOrderById=t.OrderAssigneeSchemaData=t.deliverOrder=t.sendEmailOrMobileOtp=t.pickUpOrder=t.departOrder=t.arriveOrder=t.acceptOrder=t.getAssignedOrders=void 0;const i=a(3503),d=a(4473),o=n(a(267)),s=n(a(7591)),u=n(a(8670)),l=n(a(1042)),c=n(a(8335)),g=n(a(1514)),f=n(a(5293)),m=n(a(7124)),p=n(a(146)),y=a(2581),v=n(a(8229)),h=a(8427);t.getAssignedOrders=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,v.default)(e.query,h.orderListByDeliveryManValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n={deliveryBoy:e.id};if(r.status&&(n.status=r.status),r.startDate&&r.endDate){const e=new Date(r.startDate),t=new Date(r.endDate);t.setHours(23,59,59,999),n.createdAt={$gte:e,$lte:t}}console.log("Constructed Query: ",n);const i=yield c.default.aggregate([{$match:n},{$lookup:{from:"orders",localField:"order",foreignField:"orderId",as:"orderData"}},{$unwind:{path:"$orderData",preserveNullAndEmptyArrays:!0}},{$project:{_id:0,order:"$orderData",deliveryBoy:1,status:1,createdAt:1}}]);return t.ok({data:i})}catch(e){return console.error("Error occurred: ",e),t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.acceptOrder=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,v.default)(e.body,h.orderAcceptValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;r.deliveryManId=e.id.toString();const n=yield l.default.findOne({orderId:r.orderId,status:{$eq:i.ORDER_HISTORY.CREATED}});if(!n)return t.badRequest({message:(0,d.getLanguage)("en").invalidOrder});const o=yield c.default.findOne({order:r.orderId,deliveryBoy:r.deliveryManId});if(!o)return t.badRequest({message:(0,d.getLanguage)("en").orderAlreadyAssigned});if(yield c.default.findByIdAndUpdate(o._id,{$set:{status:r.status}}),r.status===i.ORDER_REQUEST.ACCEPTED){yield l.default.findOneAndUpdate({orderId:r.orderId},{$set:{status:i.ORDER_HISTORY.ASSIGNED}});const e=yield u.default.findById(r.deliveryManId,{_id:0,name:1});yield g.default.create({message:`Your order ${r.orderId} has been assigned to ${e.firstName}`,order:r.orderId,status:i.ORDER_HISTORY.ASSIGNED,merchantID:n.merchant})}return t.ok({message:(0,d.getLanguage)("en").orderUpdatedSuccessfully})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.arriveOrder=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,v.default)(e.body,h.orderArriveValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;r.deliveryManId=e.id.toString();const n=yield l.default.findOne({orderId:r.orderId,status:{$eq:i.ORDER_HISTORY.ASSIGNED}});return n?(yield c.default.findOne({order:r.orderId,deliveryBoy:r.deliveryManId}))?(yield l.default.findOneAndUpdate({orderId:r.orderId},{$set:{status:i.ORDER_HISTORY.ARRIVED}}),yield g.default.create({message:`Your order ${r.orderId} has been arrived`,order:r.orderId,status:i.ORDER_HISTORY.ARRIVED,merchantID:n.merchant}),t.ok({message:(0,d.getLanguage)("en").orderUpdatedSuccessfully})):t.badRequest({message:(0,d.getLanguage)("en").invalidDeliveryMan}):t.badRequest({message:(0,d.getLanguage)("en").invalidOrder})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.departOrder=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,v.default)(e.body,h.orderArriveValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;r.deliveryManId=e.id.toString();const n=yield l.default.findOne({orderId:r.orderId,status:{$eq:i.ORDER_HISTORY.PICKED_UP}});return n?(yield c.default.findOne({order:r.orderId,deliveryBoy:r.deliveryManId}))?(yield l.default.findOneAndUpdate({orderId:r.orderId},{$set:{status:i.ORDER_HISTORY.DEPARTED}}),yield g.default.create({message:`Your order ${r.orderId} has been out for delivery`,order:r.orderId,status:i.ORDER_HISTORY.DEPARTED,merchantID:n.merchant}),t.ok({message:(0,d.getLanguage)("en").orderUpdatedSuccessfully})):t.badRequest({message:(0,d.getLanguage)("en").invalidDeliveryMan}):t.badRequest({message:(0,d.getLanguage)("en").invalidOrder})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.pickUpOrder=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,v.default)(e.body,h.orderPickUpValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield l.default.findOne({orderId:r.orderId,status:i.ORDER_HISTORY.ARRIVED});if(!n)return t.badRequest({message:(0,d.getLanguage)("en").errorOrderArrived});if(!(yield f.default.findOne({value:r.otp,customerEmail:n.pickupDetails.email,expiry:{$gte:Date.now()}})))return t.badRequest({message:(0,d.getLanguage)("en").otpExpired});const o=r.userSignature.split(",");return r.userSignature=yield(0,y.uploadFile)(o[0],o[1],"USER-SIGNATURE"),yield l.default.findOneAndUpdate({orderId:r.orderId},{$set:{"pickupDetails.userSignature":r.userSignature,"pickupDetails.orderTimestamp":r.pickUpTimestamp,status:i.ORDER_HISTORY.PICKED_UP}}),n.pickupDetails.cashOnDelivery&&(yield m.default.updateOne({order:r.orderId},{$set:{status:i.PAYMENT_INFO.SUCCESS}})),yield g.default.create({message:"Delivery Person has been arrived at pick up location and waiting for client",order:r.orderId,status:i.ORDER_HISTORY.PICKED_UP,merchantID:n.merchant}),t.ok({message:(0,d.getLanguage)("en").orderUpdatedSuccessfully})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.sendEmailOrMobileOtp=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,v.default)(e.body,h.orderIdValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield l.default.findOne({orderId:r.orderId,status:{$ne:i.ORDER_HISTORY.DELIVERED}});if(!n)return t.badRequest({message:(0,d.getLanguage)("en").invalidOrder});const o="DEV"===process.env.ENV?999999:(0,y.generateIntRandomNo)(111111,999999);"DEV"!==process.env.ENV&&(yield(0,y.emailOrMobileOtp)(n.pickupDetails.email,`This is your otp for identity verification ${o}`));const s=n.status===i.ORDER_HISTORY.ARRIVED,u=s?n.pickupDetails.email:n.deliveryDetails.email,c=s?n.pickupDetails.mobileNumber:n.deliveryDetails.mobileNumber;return yield f.default.updateOne({value:o,customerEmail:u,customerMobile:c},{value:o,customerEmail:u,customerMobile:c,expiry:Date.now()+6e5},{upsert:!0}),t.ok({message:(0,d.getLanguage)("en").otpSentSuccess,data:"DEV"!==process.env.ENV?{}:{otp:o}})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.deliverOrder=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,v.default)(e.body,h.orderDeliverValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield l.default.findOne({orderId:r.orderId,status:i.ORDER_HISTORY.DEPARTED});if(!n)return t.badRequest({message:(0,d.getLanguage)("en").invalidOrder});if(!(yield f.default.findOne({value:r.otp,customerEmail:n.deliveryDetails.email,expiry:{$gte:Date.now()}})))return t.badRequest({message:(0,d.getLanguage)("en").otpExpired});const u=r.deliveryManSignature.split(",");r.deliveryManSignature=yield(0,y.uploadFile)(u[0],u[1],"USER-SIGNATURE");const[_]=yield Promise.all([m.default.findOne({order:r.orderId}),l.default.updateOne({orderId:r.orderId},{$set:{"deliveryDetails.deliveryBoySignature":r.deliveryManSignature,"deliveryDetails.orderTimestamp":r.deliverTimestamp,status:i.ORDER_HISTORY.DELIVERED}})]),E=yield o.default.findOne(),b=yield c.default.findOne({order:r.orderId}),D=yield s.default.findById(n.city),R=yield p.default.findOne({cityId:D._id,pickupRequest:n.pickupDetails.request,isCustomer:n.isCustomer}),I=D.commissionType===i.CHARGE_TYPE.PERCENTAGE?n.totalCharge*(R.adminCommission/100):R.adminCommission,O=`Order ${r.orderId} Amount`;return n.deliveryDetails.cashOnDelivery?(_.status!==i.PAYMENT_INFO.SUCCESS&&(yield m.default.updateOne({order:r.orderId},{$set:{status:i.PAYMENT_INFO.SUCCESS}})),yield(0,y.updateWallet)(I,E._id.toString(),e.id.toString(),i.TRANSACTION_TYPE.WITHDRAW,`Order ${r.orderId} Admin Commission`,!1)):_.paymentThrough===i.PAYMENT_TYPE.WALLET?yield Promise.all([(0,y.updateWallet)(n.totalCharge,E._id.toString(),b.merchant.toString(),i.TRANSACTION_TYPE.WITHDRAW,O),(0,y.updateWallet)(n.totalCharge-I,E._id.toString(),e.id.toString(),i.TRANSACTION_TYPE.DEPOSIT,O,!1)]):_.paymentThrough===i.PAYMENT_TYPE.ONLINE?yield(0,y.updateWallet)(n.totalCharge-I,E._id.toString(),e.id.toString(),i.TRANSACTION_TYPE.DEPOSIT,O,!1):yield(0,y.updateWallet)(I,E._id.toString(),e.id.toString(),i.TRANSACTION_TYPE.WITHDRAW,`Order ${r.orderId} Admin Commission`,!1),yield g.default.create({message:`Your order ${r.orderId} has been successfully delivered`,order:r.orderId,status:i.ORDER_HISTORY.DELIVERED,merchantID:n.merchant}),t.ok({message:(0,d.getLanguage)("en").orderUpdatedSuccessfully})}catch(e){return console.log("ðŸš€ ~ deliverOrder ~ error:",e),t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.OrderAssigneeSchemaData=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const e=yield c.default.find();t.status(200).json({data:e})}catch(e){return console.log("ðŸš€ ~ deliverOrder ~ error:",e),t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}})),t.getOrderById=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const{orderId:a}=e.params;console.log(a);const r=yield l.default.findById(a).populate("country").populate("city").populate("vehicle");return r&&(r.city=null,r.country=null),t.ok({data:r})}catch(e){return t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}}))},596:function(e,t,a){var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},n=this&&this.__rest||function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getorderHistory=t.getOrderCounts=t.getAllDeliveryManOfMerchant=t.updateProfileOfMerchant=t.getProfileOfMerchant=t.getLocationOfMerchant=t.logout=t.renewToken=t.sendEmailOrMobileOtp=t.activateFreeSubcription=t.signIn=t.signUp=void 0;const d=i(a(6037)),o=a(829),s=a(3503),u=a(4473),l=i(a(3375)),c=i(a(7779)),g=i(a(8670)),f=i(a(5293)),m=i(a(1186)),p=i(a(4283)),y=i(a(8815)),v=i(a(1514)),h=a(2581),_=i(a(8229)),E=a(9475),b=i(a(1514)),D=i(a(1042)),R=i(a(8335));t.signUp=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,_.default)(e.body,E.userSignUpValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;if(yield y.default.findOne({email:r.email}))return t.badRequest({message:(0,u.getLanguage)("en").emailRegisteredAlready});if(r.image){const e=r.image.split(",");r.image=yield(0,h.uploadFile)(e[0],e[1],"MERCHANT(USER)-PROFILE")}else r.image=process.env.DEFAULT_PROFILE_IMAGE;return(yield f.default.findOne({value:r.otp,customerEmail:r.email,expiry:{$gte:Date.now()}}))?(yield y.default.findOne({medicalCertificateNumber:r.medicalCertificateNumber}))?t.badRequest({message:(0,u.getLanguage)("en").certificateRegisteredAlready}):(r.password=yield(0,h.encryptPassword)({password:r.password}),yield y.default.create(r),t.ok({message:(0,u.getLanguage)("en").userRegistered})):t.badRequest({message:(0,u.getLanguage)("en").otpExpired})}catch(e){return console.log("error",e),t.failureResponse({message:(0,u.getLanguage)("en").somethingWentWrong})}})),t.signIn=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,_.default)(e.body,E.userSignInValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;let i;if(i=r.personType===s.PERSON_TYPE.CUSTOMER?yield y.default.findOne({email:r.email}).lean():yield g.default.findOne({email:r.email}).lean(),!i)return t.badRequest({message:(0,u.getLanguage)("en").invalidLoginCredentials});const d=yield(0,h.passwordValidation)(r.password,i.password);if(console.log("ðŸš€ ~ signIn ~ isVerifyPassword:",d),!d)return t.badRequest({message:(0,u.getLanguage)("en").invalidLoginCredentials});const{accessToken:o,refreshToken:l}=(0,h.createAuthTokens)(i._id),{bankData:f,providerId:m}=i,p=n(i,["bankData","providerId"]),v=yield c.default.findOne({},{_id:0,name:1,symbol:1,position:1});return t.ok({message:(0,u.getLanguage)("en").loginSuccessfully,data:{userData:p,userAuthData:{accessToken:o,refreshToken:l},currency:v}})}catch(e){return t.failureResponse({message:(0,u.getLanguage)("en").somethingWentWrong})}})),t.activateFreeSubcription=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,_.default)(e.body,E.activateFreeSubcriptionValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield y.default.findOne({_id:r.userId,medicalCertificateNumber:r.medicalCertificateNumber});if(!n)return t.badRequest({message:(0,u.getLanguage)("en").userNotRegistered});if(!(yield y.default.findOne({medicalCertificateNumber:r.medicalCertificateNumber})))return t.badRequest({message:(0,u.getLanguage)("en").certificateNumberRegistered});if(yield p.default.findOne({merchant:e.id,expiry:{$gte:new Date}}))return t.badRequest({message:(0,u.getLanguage)("en").errorSubcriptionAlreadyExist});const i=r.medicalCertificate.split(",");r.medicalCertificate=yield(0,h.uploadFile)(i[0],i[1],"USER-CERTIFICATE");const d=yield m.default.findOne({amount:0,isActive:!0});return d?(yield Promise.all([p.default.create({subcriptionId:d._id,merchant:n._id,expiry:Date.now()+1e3*d.seconds,status:"APPROVED"}),y.default.updateOne({_id:e.id},{$set:{medicalCertificate:r.medicalCertificate}})]),t.ok({message:(0,u.getLanguage)("en").accountActiveSuccessfully})):t.badRequest({message:(0,u.getLanguage)("en").errorDataNotFound})}catch(e){return t.failureResponse({message:(0,u.getLanguage)("en").somethingWentWrong})}})),t.sendEmailOrMobileOtp=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,_.default)(e.body,E.otpVerifyValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;let n;if(n=r.personType===s.PERSON_TYPE.CUSTOMER?yield y.default.findOne({email:r.email,contactNumber:r.contactNumber,countryCode:r.countryCode}):yield g.default.findOne({email:r.email,contactNumber:r.contactNumber,countryCode:r.countryCode}),n)return t.badRequest({message:(0,u.getLanguage)("en").emailRegisteredAlready});const i="DEV"===process.env.ENV?999999:(0,h.generateIntRandomNo)(111111,999999);"DEV"!==process.env.ENV&&(yield(0,h.emailOrMobileOtp)(r.email,`This is your otp for registration ${i}`));const d=yield f.default.updateOne({value:i,customerEmail:r.email,customerMobile:r.contactNumber,action:r.personType},{value:i,customerEmail:r.email,customerMobile:r.contactNumber,expiry:Date.now()+6e5,action:r.personType},{upsert:!0});return d.upsertedCount||d.modifiedCount?t.ok({message:(0,u.getLanguage)("en").otpSentSuccess,data:"DEV"!==process.env.ENV?{}:{otp:i}}):t.badRequest({message:(0,u.getLanguage)("en").invalidData})}catch(e){return t.failureResponse({message:(0,u.getLanguage)("en").somethingWentWrong})}})),t.renewToken=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,_.default)(e.body,E.renewTokenValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=(0,o.verify)(r.refreshToken,process.env.REFRESH_SECRET_KEY);if(!(null==n?void 0:n.accessToken))return t.badRequest({message:(0,u.getLanguage)("en").invalidToken});let i;if(i=r.personType===s.PERSON_TYPE.CUSTOMER?yield y.default.findById(n.id):yield g.default.findById(n.id),!i)return t.badRequest({message:(0,u.getLanguage)("en").invalidToken});yield l.default.create({accessToken:n.accessToken,refreshToken:r.refreshToken});const{accessToken:d,refreshToken:c}=(0,h.createAuthTokens)(i._id);return t.ok({message:(0,u.getLanguage)("en").renewTokenSuccessfully,data:{accessToken:d,refreshToken:c}})}catch(e){return t.failureResponse({message:(0,u.getLanguage)("en").somethingWentWrong})}})),t.logout=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,_.default)(e.body,E.renewTokenValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=(0,o.verify)(r.refreshToken,process.env.REFRESH_SECRET_KEY);if(!(null==n?void 0:n.accessToken))return t.badRequest({message:(0,u.getLanguage)("en").invalidToken});let i;return i=r.personType===s.PERSON_TYPE.CUSTOMER?yield y.default.findById(n.id):yield g.default.findById(n.id),i?(yield l.default.findOne({accessToken:n.accessToken,refreshToken:r.refreshToken,isActive:!1}))?t.badRequest({message:(0,u.getLanguage)("en").invalidToken}):(yield l.default.create({accessToken:n.accessToken,refreshToken:r.refreshToken}),t.ok({message:(0,u.getLanguage)("en").logoutSuccessfully})):t.badRequest({message:(0,u.getLanguage)("en").invalidToken})}catch(e){return t.failureResponse({message:(0,u.getLanguage)("en").somethingWentWrong})}})),t.getLocationOfMerchant=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const e=(yield y.default.find({},"name contactNumber countryCode address")).map((e=>{const{name:t,contactNumber:a,countryCode:r,address:n}=e;return n&&n.street&&n.city&&n.country?{name:t,contactNumber:a,countryCode:r,address:`${n.street} ${n.city} ${n.country}`.trim()}:null})).filter(Boolean);return t.ok({data:e})}catch(e){return t.failureResponse({message:(0,u.getLanguage)("en").somethingWentWrong})}})),t.getProfileOfMerchant=(e,t)=>r(void 0,void 0,void 0,(function*(){try{console.log("user",e.params.id);const a=yield y.default.find({_id:e.params.id});return console.log("data",a),t.ok({data:a})}catch(e){return t.failureResponse({message:(0,u.getLanguage)("en").somethingWentWrong})}})),t.updateProfileOfMerchant=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const{id:a}=e.params,r=e.body,n=yield y.default.findByIdAndUpdate(a,r,{new:!0,runValidators:!0});return n?t.ok({message:(0,u.getLanguage)("en").dataUpdatedSuccessfully,data:n}):t.badRequest({message:(0,u.getLanguage)("en").userNotFound})}catch(e){return console.error("Error updating merchant(user) profile:",e),t.failureResponse({message:(0,u.getLanguage)("en").somethingWentWrong})}})),t.getAllDeliveryManOfMerchant=(e,t)=>r(void 0,void 0,void 0,(function*(){try{console.log("user",e.params.id);const a=yield g.default.aggregate([{$match:{merchantId:new d.default.Types.ObjectId(e.params.id)}},{$lookup:{from:"country",localField:"countryId",foreignField:"_id",as:"countryData"}},{$unwind:{path:"$countryData",preserveNullAndEmptyArrays:!0}},{$lookup:{from:"city",localField:"cityId",foreignField:"_id",as:"cityData"}},{$unwind:{path:"$cityData",preserveNullAndEmptyArrays:!0}},{$sort:{createdAt:-1}},{$project:{name:1,firstName:1,lastName:1,countryCode:1,contactNumber:1,email:1,status:1,country:"$countryData.countryName",city:"$cityData.cityName",merchantId:1,createdByMerchant:1,createdByAdmin:1,registerDate:"$createdAt",isVerified:1,location:{latitude:{$arrayElemAt:["$location.coordinates",0]},longitude:{$arrayElemAt:["$location.coordinates",1]}}}}]);return console.log("data",a),t.ok({data:a})}catch(e){return t.failureResponse({message:(0,u.getLanguage)("en").somethingWentWrong})}})),t.getOrderCounts=(e,t)=>r(void 0,void 0,void 0,(function*(){try{let a=e.params.id;const r=yield D.default.countDocuments({merchant:a}),n=yield b.default.countDocuments({status:"CREATED",merchantID:a}),i=yield b.default.countDocuments({status:"ASSIGNED",merchantID:a}),d=yield R.default.countDocuments({status:"ACCEPTED",merchant:a}),o=yield b.default.countDocuments({status:"ARRIVED",merchantID:a}),s=yield b.default.countDocuments({status:"PICKED_UP",merchantID:a}),l=yield b.default.countDocuments({status:"DEPARTED",merchantID:a}),c=yield b.default.countDocuments({status:"DELIVERED",merchantID:a});let f={totalOrders:r,createdOrders:n,assignedOrders:i,acceptedOrders:d,arrivedOrders:o,pickedOrders:s,departedOrders:l,deliveredOrders:c,cancelledOrders:yield b.default.countDocuments({status:"CANCELLED",merchantID:a}),deliveryMan:yield g.default.countDocuments({merchantId:a})};return t.ok({message:(0,u.getLanguage)("en").countedData,data:f})}catch(e){return console.log(e),t.failureResponse({message:(0,u.getLanguage)("en").somethingWentWrong})}})),t.getorderHistory=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const e=yield v.default.find();t.status(200).json({status:"Sucess",data:e})}catch(e){t.status(401).json({status:"Failed",error:e})}}))},2732:function(e,t,a){var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.moveToTrash=t.deleteOrderFormMerchant=t.getAllRecentOrdersFromMerchant=t.getAllOrdersFromMerchant=t.cancelOrder=t.orderUpdate=t.orderCreation=void 0;const i=n(a(6037)),d=a(3503),o=a(4473),s=n(a(267)),u=n(a(8670)),l=n(a(1042)),c=n(a(8335)),g=n(a(1514)),f=n(a(7124)),m=n(a(146)),p=n(a(8815)),y=n(a(8061)),v=a(2581),h=n(a(8229)),_=a(8427);t.orderCreation=(e,t)=>r(void 0,void 0,void 0,(function*(){try{console.log("in order route");const a=(0,h.default)(e.body,_.newOrderCreation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a;let n=yield l.default.findOne({},{_id:0,orderId:1}).sort({orderId:-1});n?n.orderId+=1:n={orderId:1},r.orderId=n.orderId,r.merchant=e.id.toString();const i=yield l.default.create(r);r.deliveryManId&&(r.isCustomer=!0,yield c.default.create({deliveryBoy:r.deliveryManId,merchant:e.id,order:i.orderId,status:d.ORDER_HISTORY.ACCEPTED})),yield g.default.create({message:"New order has been created",order:i.orderId,merchantID:i.merchant});const s={merchant:e.id.toString(),paymentThrough:r.paymentCollection,paymentCollectFrom:r.paymentOrderLocation,order:r.orderId};return yield f.default.create(s),t.ok({message:(0,o.getLanguage)("en").orderCreatedSuccessfully,data:{orderId:i.orderId}})}catch(e){return console.log("error",e),t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.orderUpdate=(e,t)=>r(void 0,void 0,void 0,(function*(){try{console.log("in order update route");const a=e.params.orderId,r=e.body,n=(0,h.default)(r,_.newOrderCreation);if(!n.isValid)return t.badRequest({message:n.message});const{value:i}=n,d=yield l.default.findOne({_id:a});if(!d)return t.badRequest({message:"Order not found"});console.log(d);const o=yield l.default.findOneAndUpdate({_id:a},{$set:i},{new:!0});return o?(i.deliveryManId&&(yield c.default.updateOne({_id:a},{deliveryBoy:i.deliveryManId})),t.ok({message:"Order updated successfully",data:{orderId:o._id}})):t.failureResponse({message:"Failed to update order"})}catch(e){return console.log("Error in order update route",e),t.failureResponse({message:"Something went wrong, please try again later"})}})),t.cancelOrder=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const a=(0,h.default)(e.body,_.orderCancelValidation);if(!a.isValid)return t.badRequest({message:a.message});const{value:r}=a,n=yield l.default.findOne({orderId:r.orderId,status:{$ne:d.ORDER_HISTORY.DELIVERED}});if(!n)return t.badRequest({message:(0,o.getLanguage)("en").invalidOrder});const i=yield s.default.findOne(),E=yield f.default.findOne({order:r.orderId},{_id:0,paymentThrough:1}),b=yield m.default.findById({city:n.city,pickupRequest:n.pickupDetails.request,isCustomer:n.isCustomer},{_id:0,cancelCharge:1}),D=n.status!==d.ORDER_HISTORY.CREATED,R={status:d.ORDER_HISTORY.CANCELLED,reason:r.reason},I=`Order ${r.orderId} Cancelled Refund`;if(D)if(R.totalCharge=b.cancelCharge,E.paymentThrough===d.PAYMENT_TYPE.CASH&&E.status===d.PAYMENT_INFO.SUCCESS){const t=yield c.default.findOne({order:r.orderId}),a=n.totalCharge-b.cancelCharge,o=yield p.default.findOneAndUpdate({_id:e.id},{$inc:{balance:a}},{new:!0}),l=yield u.default.findOneAndUpdate({_id:t._id},{$inc:{balance:-n.totalCharge}},{new:!0});yield Promise.all([y.default.insertMany([{personId:t._id,message:I,type:d.TRANSACTION_TYPE.WITHDRAW,user:d.PERSON_TYPE.DELIVERY_BOY,availableBalance:l.balance,amount:n.totalCharge},{personId:e.id,message:`Order ${r.orderId} Cancelled Refund After Cancel Charge`,type:d.TRANSACTION_TYPE.DEPOSIT,user:d.PERSON_TYPE.CUSTOMER,availableBalance:o.balance,amount:a}]),s.default.updateOne({_id:i._id},{$inc:{balance:b.cancelCharge}})])}else if(E.paymentThrough!==d.PAYMENT_TYPE.ONLINE)yield(0,v.updateWallet)(b.cancelCharge,i._id.toString(),e.id.toString(),d.TRANSACTION_TYPE.WITHDRAW,`Order ${r.orderId} Cancelled`);else{const t=n.totalCharge-b.cancelCharge;yield Promise.all([(0,v.updateWallet)(t,i._id.toString(),e.id.toString(),d.TRANSACTION_TYPE.DEPOSIT,I),s.default.updateOne({_id:i._id},{$inc:{balance:-t}})])}else E.paymentThrough===d.PAYMENT_TYPE.ONLINE&&(yield(0,v.updateWallet)(n.totalCharge,i._id.toString(),e.id.toString(),d.TRANSACTION_TYPE.DEPOSIT,I));return yield Promise.all([l.default.updateOne({orderId:r.orderId},{$set:R}),g.default.create({message:`Your order ${r.orderId} has been cancelled`,order:r.orderId,status:d.ORDER_HISTORY.CANCELLED,merchantID:n.merchant})]),t.badRequest({message:(0,o.getLanguage)("en").orderUpdatedSuccessfully})}catch(e){return t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.getAllOrdersFromMerchant=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const{startDate:a,endDate:r}=e.query;let n={};if(a&&r){const e=new Date(a),t=new Date(r);e.setUTCHours(0,0,0,0),t.setUTCHours(23,59,59,999),n={dateTime:{$gte:e,$lte:t}}}const d=yield l.default.aggregate([{$sort:{createdAt:-1}},{$match:Object.assign({merchant:new i.default.Types.ObjectId(e.params.id)},n)},{$lookup:{from:"orderAssign",localField:"orderId",foreignField:"order",as:"orderAssignData",pipeline:[{$project:{_id:0,deliveryBoy:1}}]}},{$unwind:{path:"$orderAssignData",preserveNullAndEmptyArrays:!0}},{$lookup:{from:"users",localField:"merchant",foreignField:"_id",as:"userData",pipeline:[{$project:{_id:0,name:1}}]}},{$unwind:{path:"$userData",preserveNullAndEmptyArrays:!0}},{$lookup:{from:"deliveryMan",localField:"orderAssignData.deliveryBoy",foreignField:"_id",as:"deliveryManData",pipeline:[{$project:{_id:1,firstName:1,lastName:1}}]}},{$unwind:{path:"$deliveryManData",preserveNullAndEmptyArrays:!0}},{$project:{_id:1,orderId:1,customerName:"$deliveryDetails.name",pickupAddress:"$pickupDetails",deliveryAddress:"$deliveryDetails",deliveryMan:{$concat:["$deliveryManData.firstName"," ","$deliveryManData.lastName"]},deliveryManId:"$deliveryManData._id",pickupDate:{$dateToString:{format:"%d-%m-%Y , %H:%M",date:"$pickupDetails.dateTime"}},merchantId:"$pickupDetails.merchantId",deliveryDate:{$dateToString:{format:"%d-%m-%Y , %H:%M",date:"$deliveryDetails.orderTimestamp"}},createdDate:{$dateToString:{format:"%d-%m-%Y , %H:%M",date:"$createdAt"}},pickupRequest:"$pickupDetails.request",postCode:"$pickupDetails.postCode",cashOnDelivery:1,status:1,dateTime:1,trashed:{$ifNull:["$trashed",!1]},paymentCollectionRupees:1}}]);return t.ok({data:d})}catch(e){return t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.getAllRecentOrdersFromMerchant=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const{startDate:a,endDate:r}=e.query;let n={};if(a&&r){const e=new Date(a),t=new Date(r);e.setUTCHours(0,0,0,0),t.setUTCHours(23,59,59,999),n={dateTime:{$gte:e,$lte:t}}}const d=yield l.default.aggregate([{$sort:{createdAt:-1}},{$limit:10},{$match:Object.assign({merchant:new i.default.Types.ObjectId(e.params.id)},n)},{$lookup:{from:"orderAssign",localField:"orderId",foreignField:"order",as:"orderAssignData",pipeline:[{$project:{_id:0,deliveryBoy:1}}]}},{$unwind:{path:"$orderAssignData",preserveNullAndEmptyArrays:!0}},{$lookup:{from:"users",localField:"merchant",foreignField:"_id",as:"userData",pipeline:[{$project:{_id:0,name:1}}]}},{$unwind:{path:"$userData",preserveNullAndEmptyArrays:!0}},{$lookup:{from:"deliveryMan",localField:"orderAssignData.deliveryBoy",foreignField:"_id",as:"deliveryManData",pipeline:[{$project:{_id:1,firstName:1,lastName:1}}]}},{$unwind:{path:"$deliveryManData",preserveNullAndEmptyArrays:!0}},{$project:{_id:1,orderId:1,customerName:"$deliveryDetails.name",pickupAddress:"$pickupDetails",deliveryAddress:"$deliveryDetails",deliveryMan:{$concat:["$deliveryManData.firstName"," ","$deliveryManData.lastName"]},deliveryManId:"$deliveryManData._id",pickupDate:{$dateToString:{format:"%d-%m-%Y , %H:%M",date:"$pickupDetails.dateTime"}},merchantId:"$pickupDetails.merchantId",deliveryDate:{$dateToString:{format:"%d-%m-%Y , %H:%M",date:"$deliveryDetails.orderTimestamp"}},createdDate:{$dateToString:{format:"%d-%m-%Y , %H:%M",date:"$createdAt"}},pickupRequest:"$pickupDetails.request",postCode:"$pickupDetails.postCode",cashOnDelivery:1,status:1,dateTime:1,trashed:{$ifNull:["$trashed",!1]},paymentCollectionRupees:1}}]);return t.ok({data:d})}catch(e){return t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.deleteOrderFormMerchant=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const{id:a}=e.params;return a?(yield l.default.findById(a))?(yield l.default.findByIdAndDelete(a),t.ok({message:(0,o.getLanguage)("en").orderDeleted})):t.badRequest({message:(0,o.getLanguage)("en").orderNotFound}):t.badRequest({message:(0,o.getLanguage)("en").invalidOrder})}catch(e){return console.log("ðŸš€ ~ deleteDeliveryMan ~ error:",e),t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}})),t.moveToTrash=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const{id:a}=e.params;if(!a)return t.badRequest({message:(0,o.getLanguage)("en").invalidOrder});const r=yield l.default.findById(a),n=!0!==r.trashed;return r?(yield l.default.findByIdAndUpdate(a,{trashed:n}),t.ok({message:n?(0,o.getLanguage)("en").orderMoveToTrash:(0,o.getLanguage)("en").orderUndoToTrash})):t.badRequest({message:(0,o.getLanguage)("en").orderNotFound})}catch(e){return console.log("ðŸš€ ~ deleteDeliveryMan ~ error:",e),t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}}))},6881:function(e,t,a){var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getApproveSubscription=void 0;const i=n(a(4283)),d=a(6037);t.getApproveSubscription=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const{id:a}=e.params;if(!(0,d.isValidObjectId)(a))return t.status(400).json({status:!1,message:"Invalid merchant ID."});const r=yield i.default.find({merchant:a}).populate("subcriptionId");return r.length?t.status(200).json({status:!0,data:r}):t.status(404).json({status:!1,message:"No approved subscriptions found for this merchant."})}catch(e){return console.error("Error in getApproveSubscription:",e.message),t.status(500).json({status:!1,message:"Something went wrong while fetching subscriptions."})}}))},5457:function(e,t,a){var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(a(6037));t.default=e=>{i.default.connect(e).then((()=>r(void 0,void 0,void 0,(function*(){console.log("Database Connection")})))).catch((e=>{console.log("Database Not Connected = ",e)}))}},9585:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(8450)),i=a(3503),d={name:{type:"string"},email:{type:"string",example:"demo@gmail.com"},password:{type:"string",example:"demoDEMO@1121"},contactNumber:{type:"number"},countryCode:{type:"string"},otp:{type:"number"}},o={orderId:{type:"number",required:!0}},s={otp:{type:"number",required:!1}},u={status:{type:"string",enum:Object.keys(i.ORDER_REQUEST),required:!0}},l=Object.assign({},o),c={cityId:{type:"string"},productChargeId:{type:"string"},fixedCharge:{type:"number"},title:{type:"string"},hours:{type:"number"}},g={swaggerDefinition:{openapi:"3.0.0",info:{title:"Create Courier",description:"Backend software for create courier",contact:{name:"",email:"",url:""},servers:[`http://localhost:${process.env.PORT}`],version:"1.0"},components:{securitySchemes:{bearerAuth:{type:"http",scheme:"bearer",name:"authorization",bearerFormat:"JWT",description:""}},schemas:{UserWithdrawList:{type:"string",enum:Object.keys(i.SUBCRIPTION_REQUEST)},DeliveryManWalletList:{type:"string",enum:Object.keys(i.TRANSACTION_TYPE)},AdminCreateVehicle:{type:"object",properties:{name:{type:"string"},capacity:{type:"number"},size:{type:"number"},description:{type:"string"},cityWise:{type:"string",enum:i.VEHICLE_CITY_TYPE},city:{type:"array",items:{type:"string"}},image:{type:"string"}}},AdminCreateDayCharges:{type:"object",properties:c},AdminUpdateDayCharges:{type:"object",properties:Object.assign(Object.assign({},c),{dayNumber:{type:"number"}})},AdminCreateExtraCharge:{type:"object",properties:{title:{type:"string"},charge:{type:"number"},chargeType:{type:"string",enum:i.CHARGE_TYPE},country:{type:"string"},city:{type:"string"},cashOnDelivery:{type:"boolean"}}},AdminDeleteVehicle:{type:"object",properties:{status:{type:"string",enum:i.SWITCH,default:i.SWITCH.DISABLE}}},AdminCreateParcelType:{type:"object",properties:{label:{type:"string"}}},AdminCreateCountry:{type:"object",properties:{countryName:{type:"string"},distanceType:{type:"string",enum:i.DISTANCE_TYPE,default:i.DISTANCE_TYPE.MILES},weightType:{type:"string",enum:i.WEIGHT_TYPE,default:i.WEIGHT_TYPE.POUND}}},AdminCreateCity:{type:"object",properties:{cityName:{type:"string"},countryID:{type:"string"},fixedCharge:{type:"number"},cancelCharge:{type:"number"},minimumDistance:{type:"number"},minimumWeight:{type:"number"},perDistanceCharge:{type:"number"},perWeightCharge:{type:"number"},commissionType:{type:"string",enum:i.CHARGE_TYPE,default:i.CHARGE_TYPE.FIXED},adminCommission:{type:"number"},pickupRequest:{type:"string",enum:i.PICKUP_REQUEST,default:i.PICKUP_REQUEST.REGULAR}}},OrderCreateType:{type:"object",properties:{parcelType:{type:"string"},weight:{type:"number"},distance:{type:"number"},duration:{type:"string"},country:{type:"string"},city:{type:"string"},paymentCollection:{type:"string",enum:i.PAYMENT_TYPE},paymentOrderLocation:{type:"string",enum:i.ORDER_LOCATION},vehicle:{type:"string"},pickupDetails:{type:"object",properties:{location:{type:"object",properties:{latitude:{type:"number"},longitude:{type:"number"}}},dateTime:{type:"number"},address:{type:"string"},countryCode:{type:"string"},mobileNumber:{type:"number"},email:{type:"string"},pickupRequest:{type:"string",enum:i.PICKUP_REQUEST},description:{type:"string"},postCode:{type:"string"}}},deliveryDetails:{type:"object",properties:{location:{type:"object",properties:{latitude:{type:"number"},longitude:{type:"number"}}},dateTime:{type:"number"},address:{type:"string"},countryCode:{type:"string"},mobileNumber:{type:"number"},email:{type:"string"},description:{type:"string"},postCode:{type:"string"}}},cashOnDelivery:{type:"boolean"},deliveryManId:{type:"string"}}},AdminOrderLocations:{status:{type:"string",enum:i.ADMIN_ORDER_LOCATIONS}},OrderListType:{type:"string",enum:Object.keys(i.ORDER_STATUS)},OrderIdType:{type:"object",properties:o},OrderDeliveryAccept:{type:"object",properties:Object.assign(Object.assign({},l),u)},OrderDelivery:{type:"object",properties:l},OrderArriveType:{type:"object",properties:Object.assign({},l)},OrderPickUpType:{type:"object",properties:Object.assign(Object.assign(Object.assign({},o),s),{userSignature:{type:"string",required:!0},pickupTimestamp:{type:"string",required:!0}})},OrderDeliveryType:{type:"object",properties:Object.assign(Object.assign(Object.assign({},o),s),{deliveryManSignature:{type:"string",required:!0},deliverTimestamp:{type:"string",required:!0}})},MobileSignUp:{type:"object",properties:Object.assign(Object.assign({},d),{medicalCertificateNumber:{type:"number"}})},DeliveryManSignUp:{type:"object",properties:Object.assign(Object.assign({},d),{documents:{type:"array",items:{type:"object",properties:{documentId:{type:"string"},image:{type:"string"},documentNumber:{type:"number"}}}}})},DeliveryManUpdateLocation:{type:"object",properties:{country:{type:"string"},city:{type:"string"},location:{type:"object",properties:{latitude:{type:"number"},longitude:{type:"number"}}}}},MobileSignIn:{type:"object",properties:{email:{type:"string",example:"demo@gmail.com"},password:{type:"string",example:"demoDEMO@1121"},personType:{type:"string",enum:i.PERSON_TYPE,default:i.PERSON_TYPE.CUSTOMER}}},MobileOtpVerify:{type:"object",properties:{email:{type:"string"},contactNumber:{type:"number"},countryCode:{type:"string"},personType:{type:"string",enum:i.PERSON_TYPE,default:i.PERSON_TYPE.CUSTOMER}}},MobileRenewToken:{type:"object",properties:{refreshToken:{type:"string"},personType:{type:"string",enum:i.PERSON_TYPE,default:i.PERSON_TYPE.CUSTOMER}}},AdminAssignOrder:{type:"object",properties:{deliveryManId:{type:"string"},orderId:{type:"number"}}},AdminCreateDeliveryMan:{type:"object",properties:{deliveryManId:{type:"string"},documentId:{type:"string"},status:{type:"string",enum:i.SUBCRIPTION_REQUEST,default:i.SUBCRIPTION_REQUEST.APPROVED}}},AdminCreateDocument:{type:"object",properties:{name:{type:"string"},isRequired:{type:"boolean"}}},AdminManageSubscription:{type:"object",properties:{type:{type:"string"},amount:{type:"number"},discount:{type:"number"},features:{type:"array",items:{type:"string"}},days:{type:"number"},subscriptionId:{type:"string"}}},AdminAcceptSubscription:{type:"object",properties:{subscriptionId:{type:"string"},subscriptionStatus:{type:"string",enum:[i.SUBCRIPTION_REQUEST.APPROVED,i.SUBCRIPTION_REQUEST.REJECT],default:i.SUBCRIPTION_REQUEST.APPROVED}}}}}},apis:["./src/routes/admin/*.ts","./src/routes/deliveryBoy/*.ts","./src/routes/mobile/*.ts"]},f=(0,n.default)(g);t.default=f},3503:(e,t)=>{var a,r,n,i,d,o,s,u,l,c,g,f,m,p,y,v,h,_,E,b;Object.defineProperty(t,"__esModule",{value:!0}),t.DAY_WISE_CHARGE_TYPE=t.PERSON_TYPE=t.WEIGHT_TYPE=t.DISTANCE_TYPE=t.CHARGE_TYPE=t.PICKUP_REQUEST=t.VEHICLE_CITY_TYPE=t.TRANSACTION_TYPE=t.PAYMENT_TYPE=t.SUBCRIPTION_REQUEST=t.PAYMENT_INFO=t.ORDER_LOCATION=t.ORDER_REQUEST=t.ORDER_LIST=t.ADMIN_ORDER_LOCATIONS=t.ORDER_STATUS=t.ORDER_HISTORY=t.PROVIDER=t.SWITCHSTATUS=t.SWITCH=void 0,function(e){e.ENABLE="ENABLE",e.DISABLE="DISABLE"}(a||(t.SWITCH=a={})),function(e){e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(r||(t.SWITCHSTATUS=r={})),function(e){e.GOOGLE="GOOGLE",e.FACEBOOK="FACEBOOK",e.APP="APP"}(n||(t.PROVIDER=n={})),function(e){e.CREATED="CREATED",e.ASSIGNED="ASSIGNED",e.ACCEPTED="ACCEPTED",e.CANCELLED="CANCELLED",e.DELIVERED="DELIVERED",e.PICKED_UP="PICKED_UP",e.DEPARTED="DEPARTED",e.DRAFT="DRAFT",e.ACTIVE="ACTIVE",e.COMPLETED="COMPLETED",e.ARRIVED="ARRIVED",e.DELAYED="DELAYED",e.FAILED="FAILED",e.PAYMENT_STATUS_MESSAGE="PAYMENT_STATUS_MESSAGE"}(i||(t.ORDER_HISTORY=i={})),function(e){e.CREATED="CREATED",e.ASSIGNED="ASSIGNED",e.ACCEPTED="ACCEPTED",e.CANCELLED="CANCELLED",e.DELIVERED="DELIVERED",e.PICKED_UP="PICKED_UP",e.DEPARTED="DEPARTED",e.ARRIVED="ARRIVED"}(d||(t.ORDER_STATUS=d={})),function(e){e.ACCEPTED="ACCEPTED",e.ASSIGNED="ASSIGNED",e.ARRIVED="ARRIVED",e.PICKED_UP="PICKED_UP",e.DEPARTED="DEPARTED"}(o||(t.ADMIN_ORDER_LOCATIONS=o={})),function(e){e.PENDING="PENDING",e.COMPLETED="COMPLETED"}(s||(t.ORDER_LIST=s={})),function(e){e.ACCEPTED="ACCEPTED",e.REJECT="REJECT",e.PENDING="PENDING"}(u||(t.ORDER_REQUEST=u={})),function(e){e.PICK_UP="PICK_UP",e.DELIVERY="DELIVERY"}(l||(t.ORDER_LOCATION=l={})),function(e){e.SUCCESS="SUCCESS",e.REJECT="REJECT",e.PENDING="PENDING"}(c||(t.PAYMENT_INFO=c={})),function(e){e.APPROVED="APPROVED",e.REJECT="REJECT",e.PENDING="PENDING"}(g||(t.SUBCRIPTION_REQUEST=g={})),function(e){e.CASH="CASH",e.WALLET="WALLET",e.ONLINE="ONLINE"}(f||(t.PAYMENT_TYPE=f={})),function(e){e.DEPOSIT="DEPOSIT",e.WITHDRAW="WITHDRAW"}(m||(t.TRANSACTION_TYPE=m={})),function(e){e.ALL="ALL",e.CITY_WISE="CITY_WISE"}(p||(t.VEHICLE_CITY_TYPE=p={})),function(e){e.REGULAR="REGULAR",e.EXPRESS="EXPRESS"}(y||(t.PICKUP_REQUEST=y={})),function(e){e.FIXED="FIXED",e.PERCENTAGE="PERCENTAGE"}(v||(t.CHARGE_TYPE=v={})),function(e){e.KM="KM",e.MILES="MILES"}(h||(t.DISTANCE_TYPE=h={})),function(e){e.KG="KG",e.POUND="POUND"}(_||(t.WEIGHT_TYPE=_={})),function(e){e.CUSTOMER="CUSTOMER",e.DELIVERY_BOY="DELIVERY_BOY",e.ADMIN="ADMIN"}(E||(t.PERSON_TYPE=E={})),function(e){e.SAME_DAY="SAME_DAY",e.NEXT_DAY="NEXT_DAY",e.THREE_FIVE_DAYS="3-5_DAYS"}(b||(t.DAY_WISE_CHARGE_TYPE=b={}))},4473:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getLanguage=void 0;const n=r(a(6054));t.getLanguage=e=>n.default[e]},8659:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default={somethingWentWrong:"Something went wrong",invalidToken:"Unauthorized user, Token is invalid",invalidLoginCredentials:"Invalid Login Credentials",personNotFound:"Person Not Found",deliveryManNotFound:"Delivery Man Not Found",orderNotFound:"Order Not Found",userNotFound:"User Not Found",invalidData:"Invalid Data",countedData:"all counted data successfully",invalidOldPassword:"The old password you entered is incorrect.",passwordUpdated:"Your password has been successfully updated.",passwordMismatch:"New password and confirm password do not match.",invalidCountry:"Country or city not found",subcriptionExpired:"Your subcription is expired",subcriptionPending:"Your subcription is not approved yet",otpExpired:"OTP verification failed due to expired",logoutSuccessfully:"Logout successfully",renewTokenSuccessfully:"Renew token successfully",otpSentSuccess:"Email or mobile otp sent successfully",accountActiveSuccessfully:"Your request sent for confirmation successfully",certificateNumberRegistered:"Medical Certificate Number Invalid",userNotRegistered:"User Not Registered",certificateRegisteredAlready:"Medical certificate already registered",emailRegisteredAlready:"Email or mobile number already registered",userRegistered:"You registered successfully",dataUpdatedSuccessfully:"Data updated successfully",loginSuccessfully:"Login is successfully",orderCreatedSuccessfully:"Order created successfully",invalidOrder:"Order invalid",orderAlreadyAssigned:"Order assigned already",invalidDeliveryMan:"Invalid delivery man",orderNotAssigned:"Order not assigned",orderAssignedSuccessfully:"Order assigned successfully",orderUpdatedSuccessfully:"Order updated successfully",errorOrderArrived:"Order arrived already",errorDataNotFound:"Free Plan Data Not Found",errorActivation:"Account Request For Activation Not Found",errorDocumentAlreadyExist:"Document already exist",errorDocumentNotFound:"Document not found",errorDocumentMissing:"Documents are required but missing",errorInvalidDocument:"Documents invalid",errorDocumentVerified:"All documents are not verified",errorCityFieldRequired:"City field required when adding vehicle with city wise",errorSubcriptionAlreadyExist:"You already sent request for active free plan subcription",errorParcelTypeAlreadyRegistered:"Parcel Type registered already, try something different category of parcels",countryCreated:"Country created successfully",countryUpdated:"Country updated successfully",noCountryFound:"No Country found",countryDeleted:"Country deleted successfully",countryRegisteredAlready:"Country registered already",cityCreated:"City created successfully",cityUpdated:"City updated successfully",noCityFound:"No Country found",cityDeleted:"Country deleted successfully",documentCreated:"Document created successfully",documentUpdated:"Document updated successfully",documentVerificationUpdatedSuccessfully:"Document Verification Updated Successfully",countryNotFound:"Country Not Found",orderNotDelivered:"Orders are not delivered yet so you can not update above settings",subcriptionDataNotFound:"Subscription data not found",subcriptionAlreadyCreated:"Subscription already created",noDeliveryBoysFound:"No delivery boys found.",deliveryBoysFetched:"Delivery boys fetched successfully.",deliveryBoysDeleted:"Delivery boys deleted successfully.",orderDeleted:"Order deleted successfully.",orderMoveToTrash:"Order move to trash successfully.",orderUndoToTrash:"Order undo from to trash successfully.",invalidcustomer:"customer invalid",customerNotFound:"Customer Not Found",customerMoveToTrash:"customer move to trash successfully.",deliveryManMoveToTrash:"DelivetyMan move to trash successfully.",customerUndoToTrash:"customer undo from to trash successfully.",deliveryManUndoToTrash:"DelivetyMan undo from to trash successfully.",customerUpdated:"Customer data update successfully."}},6054:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(8659));t.default={en:n.default}},6500:function(e,t,a){var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(829),d=a(4473),o=n(a(267)),s=n(a(3375));t.default=(e,t,a)=>r(void 0,void 0,void 0,(function*(){try{const r=e.headers.authorization;if(!(null==r?void 0:r.includes("Bearer")))return t.badRequest({message:(0,d.getLanguage)("en").invalidToken});const n=r.split(" "),u=(0,i.verify)(n[1],process.env.ACCESS_SECRET_KEY);if(!u)return t.badRequest({message:(0,d.getLanguage)("en").invalidToken});if(yield s.default.findOne({$or:[{accessToken:n},{refreshToken:n}],isActive:!1}))return t.badRequest({message:(0,d.getLanguage)("en").invalidToken});const l=yield o.default.findById(u.id);if(!l)return t.badRequest({message:(0,d.getLanguage)("en").invalidToken});e.id=l._id,e.language=l.language,a()}catch(e){return console.log("ðŸš€ ~ error:",e),t.failureResponse({message:(0,d.getLanguage)("en").somethingWentWrong})}}))},1589:function(e,t,a){var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(829),d=a(3503),o=a(4473),s=n(a(3375)),u=n(a(8670)),l=n(a(7501));t.default=(e,t,a)=>r(void 0,void 0,void 0,(function*(){try{const r=e.headers.authorization;if(!(null==r?void 0:r.includes("Bearer")))return t.badRequest({message:(0,o.getLanguage)("en").invalidToken});const n=r.split(" "),c=(0,i.verify)(n[1],process.env.ACCESS_SECRET_KEY);if(!c)return t.badRequest({message:(0,o.getLanguage)("en").invalidToken});if(yield s.default.findOne({$or:[{accessToken:n},{refreshToken:n}],isActive:!1}))return t.badRequest({message:(0,o.getLanguage)("en").invalidToken});const g=yield u.default.findById(c.id);if(!g)return t.badRequest({message:(0,o.getLanguage)("en").invalidToken});if((yield l.default.find({deliveryManId:c.id},{_id:0,status:1})).some((e=>e.status===d.SUBCRIPTION_REQUEST.PENDING)))return t.badRequest({message:(0,o.getLanguage)("en").errorDocumentVerified});e.id=g._id,e.language=g.language,a()}catch(e){return t.failureResponse({message:(0,o.getLanguage)("en").invalidToken})}}))},7243:function(e,t,a){var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(829),d=a(3503),o=a(4473),s=n(a(3375)),u=n(a(4283)),l=n(a(8815));t.default=(e,t,a)=>r(void 0,void 0,void 0,(function*(){try{const r=e.headers.authorization;if(!(null==r?void 0:r.includes("Bearer")))return t.badRequest({message:(0,o.getLanguage)("en").invalidToken});const n=r.split(" "),c=(0,i.verify)(n[1],process.env.ACCESS_SECRET_KEY);if(!c)return t.badRequest({message:(0,o.getLanguage)("en").invalidToken});if(yield s.default.findOne({$or:[{accessToken:n},{refreshToken:n}],isActive:!1}))return t.badRequest({message:(0,o.getLanguage)("en").invalidToken});const g=yield l.default.findById(c.id);if(!g)return t.badRequest({message:(0,o.getLanguage)("en").invalidToken});const f=yield u.default.findOne({merchant:c.id,expiry:{$gte:Date.now()}});if(!f)return t.badRequest({message:(0,o.getLanguage)("en").subcriptionExpired});if(f.status!==d.SUBCRIPTION_REQUEST.APPROVED)return t.badRequest({message:(0,o.getLanguage)("en").subcriptionPending});e.id=g._id,e.language=g.language,a()}catch(e){return t.failureResponse({message:(0,o.getLanguage)("en").somethingWentWrong})}}))},267:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(6037)),i=new n.default.Schema({name:{type:String},email:{type:String,unique:!0},password:{type:String},contactNumber:{type:Number},countryCode:{type:String},profileImage:{type:String},balance:{type:Number},language:{type:String,default:"en"}},{timestamps:!0,versionKey:!1}),d=n.default.model("admin",i);t.default=d},804:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(6037)),i=new n.default.Schema({emailVerify:{type:Boolean,default:!0},currency:{type:n.default.SchemaTypes.ObjectId},mobileNumberVerify:{type:Boolean,default:!1},orderAutoAssign:{type:Boolean,default:!1},personalAdminCommission:{type:Boolean,default:!1},otpVerifyBothLocation:{type:Boolean,default:!1}},{timestamps:!0,versionKey:!1}),d=n.default.model("adminSettings",i,"adminSettings");t.default=d},3375:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(6037)),i=new n.default.Schema({accessToken:{type:String},refreshToken:{type:String},isActive:{type:Boolean,default:!1}},{timestamps:!0,versionKey:!1}),d=n.default.model("authTokens",i,"authTokens");t.default=d},7591:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(6037)),i=a(3503),d=new n.default.Schema({cityName:{type:String,unique:!0},countryID:{type:n.default.Schema.Types.ObjectId,ref:"country"},commissionType:{type:String,enum:i.CHARGE_TYPE},isActive:{type:Boolean,default:!0}},{timestamps:!0,versionKey:!1}),o=n.default.model("city",d,"city");t.default=o},9040:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(6037)),i=a(3503),d=new n.default.Schema({countryName:{type:String,unique:!0},distanceType:{type:String,enum:i.DISTANCE_TYPE},weightType:{type:String,enum:i.WEIGHT_TYPE},isActive:{type:Boolean,default:!0}},{timestamps:!0,versionKey:!1}),o=n.default.model("country",d,"country");t.default=o},7779:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(6037)),i=new n.default.Schema({name:{type:String,unique:!0},symbol:{type:String,unique:!0},position:{type:String}},{timestamps:!0,versionKey:!1}),d=n.default.model("currency",i,"currency");t.default=d},3234:function(e,t,a){var r,n=this&&this.__createBinding||(Object.create?function(e,t,a,r){void 0===r&&(r=a);var n=Object.getOwnPropertyDescriptor(t,a);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,r,n)}:function(e,t,a,r){void 0===r&&(r=a),e[r]=t[a]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),d=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[t.length]=a);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a=r(e),d=0;d<a.length;d++)"default"!==a[d]&&n(t,e,a[d]);return i(t,e),t}),o=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=d(a(6037)),u=new s.Schema({name:{type:String,required:!0},seq:{type:Number,default:0}},{timestamps:!0}),l=s.default.model("Counter",u),c=new s.Schema({customerId:{type:String,unique:!0},firstName:{type:String,required:!0},lastName:{type:String,required:!0},country:{type:String,required:!0},city:{type:String,required:!0},address:{type:String,required:!0},postCode:{type:String,required:!0},mobileNumber:{type:String,required:!0},email:{type:String,required:!0},trashed:{type:Boolean,default:!1},location:{type:{type:String,default:"Point"},coordinates:{type:[Number],required:!0}},createdByAdmin:{type:Boolean,default:!1}},{timestamps:!0});c.pre("save",(function(e){return o(this,void 0,void 0,(function*(){if(this.isNew){const e=yield o(void 0,void 0,void 0,(function*(){return(yield l.findOneAndUpdate({name:"customerId"},{$inc:{seq:1}},{new:!0,upsert:!0})).seq}));this.customerId=`${e}`}e()}))}));const g=s.default.model("Customer",c,"customer");t.default=g},381:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(6037)),i=new n.default.Schema({title:{type:String},productChargeId:{type:n.default.Schema.Types.ObjectId},charge:{type:Number},dayInMs:{type:Number},dayNumber:{type:Number,unique:!0}},{timestamps:!0,versionKey:!1}),d=n.default.model("dayWiseFixedCharges",i);t.default=d},8670:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(6037)),i=a(3503),d=new n.default.Schema({firstName:{type:String},lastName:{type:String},email:{type:String,unique:!0},password:{type:String},contactNumber:{type:Number},isVerified:{type:Boolean,default:!1},countryId:{type:n.default.Schema.Types.ObjectId},cityId:{type:n.default.Schema.Types.ObjectId},address:{type:String},postCode:{type:String},status:{type:String,enum:i.SWITCH,default:i.SWITCH.ENABLE},location:{type:{type:String},coordinates:[]},bankData:{type:{name:{type:String},accountNumber:{type:Number},permanentBankName:{type:String},ifscCode:{type:String}}},balance:{type:Number},earning:{type:Number},image:{type:String},provider:{type:String,enum:i.PROVIDER,default:i.PROVIDER.APP},providerId:{type:String,enum:i.PROVIDER},merchant:{type:n.default.Types.ObjectId},isCustomer:{type:Boolean,default:!1},trashed:{type:Boolean,default:!1},language:{type:String,default:"en"},merchantId:{type:n.default.Schema.Types.ObjectId,ref:"merchant"},createdByMerchant:{type:Boolean,default:!1},createdByAdmin:{type:Boolean,default:!1}},{timestamps:!0,versionKey:!1}),o=n.default.model("deliveryMan",d,"deliveryMan");t.default=o},7501:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(6037)),i=a(3503),d=new n.default.Schema({document:{type:n.default.Schema.Types.ObjectId,ref:"documents"},deliveryManId:{type:n.default.Schema.Types.ObjectId,ref:"deliveryMan"},documentNumber:{type:String},status:{type:String,enum:i.SUBCRIPTION_REQUEST,default:i.SUBCRIPTION_REQUEST.PENDING},image:{type:String}},{timestamps:!0,versionKey:!1}),o=n.default.model("deliveryManDocuments",d,"deliveryManDocuments");t.default=o},8001:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(6037)),i=a(3503),d=new n.default.Schema({name:{type:String,unique:!0},isRequired:{type:Boolean},status:{type:String,enum:i.SWITCH,default:i.SWITCH.ENABLE}},{timestamps:!0,versionKey:!1}),o=n.default.model("document",d);t.default=o},279:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(6037)),i=a(3503),d=new n.default.Schema({title:{type:String},country:{type:n.default.Schema.Types.ObjectId,ref:"country"},city:{type:n.default.Schema.Types.ObjectId,ref:"city"},chargeType:{type:String,enum:i.CHARGE_TYPE},charge:{type:Number},status:{type:String,enum:i.SWITCH,default:i.SWITCH.ENABLE},merchant:{type:n.default.Schema.Types.ObjectId},isCustomer:{type:Boolean,default:!1},cashOnDelivery:{type:Boolean,default:!1}},{timestamps:!0,versionKey:!1}),o=n.default.model("extraCharges",d,"extraCharges");t.default=o},1042:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(6037)),i=a(3503),d=new n.default.Schema({orderId:{type:Number,unique:!0},parcelType:{type:String},parcel:{type:n.default.Schema.Types.ObjectId,ref:"parcel"},weight:{type:Number},startPickupDate:{type:Date},endPickupDate:{type:Date},startDeliveryDate:{type:Date},endDeliveryDate:{type:Date},parcelsCount:{type:Number},paymentCollectionRupees:{type:Number},description:{type:String},country:{type:n.default.Schema.Types.ObjectId,ref:"country"},city:{type:n.default.Schema.Types.ObjectId,ref:"city"},cashOnDelivery:{type:Boolean,default:!1},dateTime:{type:Date},pickupDetails:{type:{location:{type:Object,properties:{type:String,coordinates:Array}},merchantId:{type:n.default.Schema.Types.ObjectId},dateTime:{type:Date},orderTimestamp:{type:Date},address:{type:String},mobileNumber:{type:Number},name:{type:String},email:{type:String},description:{type:String},userSignature:{type:String},request:{type:String,enum:i.PICKUP_REQUEST,default:i.PICKUP_REQUEST.REGULAR},postCode:{type:String},cashOnDelivery:{type:Boolean,default:!1}}},deliveryDetails:{type:{orderTimestamp:{type:Date},address:{type:String},mobileNumber:{type:Number},name:{type:String},email:{type:String},description:{type:String},deliveryBoySignature:{type:String},postCode:{type:String},cashOnDelivery:{type:Boolean,default:!1}}},deliveryLocation:{type:Object,properties:{type:String,coordinates:Array}},vehicle:{type:n.default.Schema.Types.ObjectId,ref:"vehicle"},status:{type:String,default:i.ORDER_HISTORY.CREATED,enum:i.ORDER_HISTORY},merchant:{type:n.default.Schema.Types.ObjectId,ref:"merchant"},trashed:{type:Boolean,default:!1},charges:{type:[{title:{type:String},charge:{type:Number},chargeId:{type:n.default.Schema.Types.ObjectId}}]},totalCharge:{type:Number},dayChargeNumber:{type:Number,default:1},reason:{type:String},distance:{type:Number},duration:{type:String},pickupExpress:{type:Boolean},cashCollection:{type:Number},isCustomer:{type:Boolean,default:!1}},{timestamps:!0,versionKey:!1}),o=n.default.model("order",d);t.default=o},8335:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(6037)),i=a(3503),d=new n.default.Schema({deliveryBoy:{type:n.default.Schema.Types.ObjectId},merchant:{type:n.default.Schema.Types.ObjectId},order:{type:Number},status:{type:String,default:i.ORDER_REQUEST.PENDING,enum:i.ORDER_REQUEST}},{timestamps:!0,versionKey:!1}),o=n.default.model("orderAssign",d,"orderAssign");t.default=o},1514:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(6037)),i=a(3503),d=new n.default.Schema({merchantID:{type:n.default.Schema.Types.ObjectId},message:{type:String},order:{type:Number},status:{type:String,default:i.ORDER_HISTORY.CREATED,enum:i.ORDER_HISTORY}},{timestamps:!0,versionKey:!1}),o=n.default.model("orderHistory",d,"orderHistory");t.default=o},5293:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(6037)),i=a(3503),d=new n.default.Schema({value:{type:Number},customerEmail:{type:String},customerMobile:{type:Number},expiry:{type:Date},action:{type:String,enum:i.PERSON_TYPE}},{timestamps:!0,versionKey:!1}),o=n.default.model("otp",d);t.default=o},5541:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(6037)),i=a(3503),d=new n.default.Schema({label:{type:String,unique:!0},value:{type:String},status:{type:String,enum:i.SWITCH,default:i.SWITCH.ENABLE},merchant:{type:n.default.Schema.Types.ObjectId},isCustomer:{type:Boolean,default:!1}},{timestamps:!0,versionKey:!1}),o=n.default.model("parcel",d);t.default=o},7124:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(6037)),i=a(3503),d=new n.default.Schema({paymentThrough:{type:String,enum:i.PAYMENT_TYPE},paymentCollectFrom:{type:String,enum:i.ORDER_LOCATION},order:{type:Number},wallet:{type:n.default.SchemaTypes.ObjectId},merchant:{type:n.default.SchemaTypes.ObjectId},status:{type:String,enum:i.PAYMENT_INFO,default:i.PAYMENT_INFO.PENDING},details:{type:Object}},{timestamps:!0,versionKey:!1}),o=n.default.model("paymentInfo",d,"paymentInfo");t.default=o},146:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(6037)),i=a(3503),d=new n.default.Schema({cityId:{type:n.default.Schema.Types.ObjectId,ref:"city"},cancelCharge:{type:Number,default:0},minimumDistance:{type:Number,default:0},minimumWeight:{type:Number,default:0},perDistanceCharge:{type:Number,default:0},perWeightCharge:{type:Number,default:0},adminCommission:{type:Number},pickupRequest:{type:String,enum:i.PICKUP_REQUEST,default:i.PICKUP_REQUEST.REGULAR},merchant:{type:n.default.Schema.Types.ObjectId},isCustomer:{type:Boolean,default:!1}},{timestamps:!0,versionKey:!1}),o=n.default.model("ProductCharges",d,"ProductCharges");t.default=o},1186:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(6037)),i=new n.default.Schema({type:{type:String},amount:{type:Number},discount:{type:Number},features:{type:Array},seconds:{type:Number},isActive:{type:Boolean,default:!0}},{timestamps:!0,versionKey:!1}),d=n.default.model("subcription",i);t.default=d},4283:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(6037)),i=a(3503),d=new n.default.Schema({subcriptionId:{type:n.default.Schema.Types.ObjectId,ref:"subcription"},merchant:{type:n.default.Schema.Types.ObjectId,ref:"merchant"},expiry:{type:Date},status:{type:String,enum:i.SUBCRIPTION_REQUEST,default:i.SUBCRIPTION_REQUEST.PENDING}},{timestamps:!0,versionKey:!1}),o=n.default.model("subcriptionPurchase",d,"subcriptionPurchase");t.default=o},8815:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(6037)),i=a(3503),d=new n.default.Schema({name:{type:String},email:{type:String,unique:!0},password:{type:String},contactNumber:{type:Number},countryCode:{type:String},country:{type:String,unique:!0},city:{type:String,unique:!0},status:{type:String,default:i.SWITCH.ENABLE,enum:i.SWITCH},isVerified:{type:Boolean,default:!0},bankData:{type:{name:{type:String},accountNumber:{type:Number},permanentBankName:{type:String},ifscCode:{type:String}}},balance:{type:Number},provider:{type:String,enum:i.PROVIDER,default:i.PROVIDER.APP},providerId:{type:String,enum:i.PROVIDER},medicalCertificateNumber:{type:Number,unique:!0},medicalCertificate:{type:String},language:{type:String,default:"en"},image:{type:String},address:{street:String,city:String,postalCode:String,country:String},createdByAdmin:{type:Boolean,default:!1}},{timestamps:!0,versionKey:!1}),o=n.default.model("merchant",d);t.default=o},7406:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(6037)),i=a(3503),d=new n.default.Schema({name:{type:String},city:{type:[{type:n.default.Schema.Types.ObjectId}]},size:{type:Number},capacity:{type:Number},description:{type:String},image:{type:String},cityType:{type:String,default:i.VEHICLE_CITY_TYPE.ALL,enum:i.VEHICLE_CITY_TYPE},status:{type:String,default:i.SWITCH.ENABLE,enum:i.SWITCH},merchant:{type:n.default.Schema.Types.ObjectId},isCustomer:{type:Boolean,default:!1}},{timestamps:!0,versionKey:!1}),o=n.default.model("vehicle",d);t.default=o},8061:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(6037)),i=a(3503),d=new n.default.Schema({personId:{type:n.default.Schema.Types.ObjectId},type:{type:String,enum:i.TRANSACTION_TYPE},message:{type:String},userFlag:{type:String,enum:i.PERSON_TYPE},availableBalance:{type:Number},amount:{type:Number},status:{type:String,enum:i.SUBCRIPTION_REQUEST,default:i.SUBCRIPTION_REQUEST.APPROVED}},{timestamps:!0,versionKey:!1}),o=n.default.model("walletHistory",d,"walletHistory");t.default=o},5445:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(7252)),i=a(2205),d=r(a(6500)),o=n.default.Router();o.post("/signIn",i.signIn),o.post("/profileCredentialUpdate",d.default,i.profileCredentialUpdate),o.post("/sendEmailOrMobileOtp",d.default,i.sendEmailOrMobileOtp),o.post("/profileUpdate",d.default,i.profileUpdate),o.post("/renewToken",i.renewToken),o.patch("/logout",i.logout),o.get("/count",d.default,i.getOrderCounts),t.default=o},4278:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=a(7252),n=a(6034),i=(0,r.Router)();i.post("/create",n.createCity),i.patch("/:cityId",n.updateCity),i.get("/",n.getCities),i.post("/day-charges/create",n.createDayWiseCharges),i.put("/day-charges/update",n.updateDayWiseCharges),i.get("/day-charges/:productChargeId",n.getDayWiseChargesByCity),i.delete("/deleteCity/:cityId",n.deleteCity),t.default=i},5725:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=a(7252),n=a(6034),i=a(1577),d=(0,r.Router)();d.post("/create",i.createCountry),d.patch("/:countryId",i.updateCountry),d.get("/",i.getCountries),d.get("/names",n.getCountryNames),d.delete("/deleteCountry/:countryId",i.deleteCountry),t.default=d},2131:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=a(7252),n=a(5791),i=(0,r.Router)();i.post("/addCustomer",n.addCustomer),t.default=i},1455:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=a(7252),n=a(9683),i=(0,r.Router)();i.patch("/updateVerificationStatus",n.updateVerificationStatus),i.get("/documents",n.getDeliveryManDocuments),i.get("/locations",n.getDeliveryManLocations),i.get("/",n.getDeliveryMans),i.get("/getAllDeliveryMans",n.getAllDeliveryMans),i.get("/getAllDeliveryMansFromAdmin",n.getAllDeliveryMansFromAdmin),i.get("/orders/:deliveryManId",n.getDeliveryManOrders),i.get("/assignInfo/:orderId",n.getDeliveryManInfo),i.get("/names",n.getDeliveryManNames),i.get("/:deliveryManId",n.getDeliveryManProfileById),i.get("/wallet-history/:deliveryManId",n.getDeliveryManWalletHistory),i.post("/addDeliveryMan",n.addDeliveryMan),i.delete("/deleteDeliveryMan/:deliveryManId",n.deleteDeliveryMan),t.default=i},380:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(7252)),i=a(3812),d=n.default.Router();d.post("/create",i.createDocument),d.patch("/:documentId",i.updateDocument),d.delete("/:documentId",i.deleteDocument),d.get("/",i.getDocuments),t.default=d},8641:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(7252)),i=a(7898),d=n.default.Router();d.post("/create",i.createExtraCharges),d.patch("/:extraChargeId",i.updateExtraCharges),d.delete("/:extraChargeId",i.deleteExtraCharge),d.get("/",i.getExtraCharges),t.default=d},7155:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(7252)),i=r(a(6500)),d=r(a(5445)),o=r(a(4278)),s=r(a(5725)),u=r(a(2131)),l=r(a(1455)),c=r(a(380)),g=r(a(8641)),f=r(a(8723)),m=r(a(8680)),p=r(a(9420)),y=r(a(8686)),v=r(a(3471)),h=n.default.Router();h.use("/auth",d.default),h.use(i.default),h.use("/users",y.default),h.use("/orders",f.default),h.use("/vehicle",v.default),h.use("/parcelType",m.default),h.use("/extraCharge",g.default),h.use("/document",c.default),h.use("/customer",u.default),h.use("/deliveryMan",l.default),h.use("/country",s.default),h.use("/city",o.default),h.use("/subscriptions",p.default),t.default=h},8723:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(7252)),i=a(9683),d=a(7687),o=a(2732),s=n.default.Router();s.post("/assign",d.assignOrder),s.post("/create",o.orderCreation),s.get("/",d.getOrders),s.get("/getAllOrders",d.getAllOrders),s.get("/location",i.getOrderLocations),t.default=s},8680:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(7252)),i=a(7412),d=n.default.Router();d.post("/create",i.createParcelTypes),d.patch("/:parcelTypeId",i.updateParcelTypes),d.delete("/:parcelTypeId",i.deleteParcelType),d.get("/",i.getParcelTypes),t.default=d},9420:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(7252)),i=a(7923),d=n.default.Router();d.post("/manage",i.manageSubscriptions),d.get("/Approve",i.getApproveSubscription),d.get("/",i.getSubscriptions),d.get("/pending",i.getPendingSubscription),d.patch("/status",i.acceptSubscription),d.delete("/removeSubscription/:id",i.deleteSubscription),d.delete("/deletePurchaseSubscription/:id",i.deletePurchaseSubscription),t.default=d},8686:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=a(7252),n=a(9683),i=a(7923),d=(0,r.Router)();d.get("/",i.getUsers),d.get("/getAllUsers",i.getAllUsers),d.get("/getAllUsersFromAdmin",i.getAllUsersFromAdmin),d.post("/addUser",i.addUser),d.get("/name",n.getUserNames),d.get("/withdraw-history",n.getUserWithdrawHistory),t.default=d},3471:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(7252)),i=a(7319),d=n.default.Router();d.post("/create",i.createVehicle),d.patch("/:vehicleId",i.updateVehicle),d.delete("/:vehicleId",i.deleteVehicle),d.get("/",i.getVehicles),d.get("/getVehicalForAll",i.getVehiclesForAll),t.default=d},9514:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(7252)),i=a(7018),d=n.default.Router();d.post("/signUp",i.createCustomer),d.patch("/customerUpdate/:id",i.updateCustomer),d.get("/getCustomers",i.getCustomers),d.get("/getCities",i.getCities),d.get("/getCountries",i.getCountries),d.delete("/deleteCustomer/:id",i.deleteCustomerById),d.patch("/moveToTrashCustomer/:id",i.moveToTrashCustomer),t.default=d},3464:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(7252)),i=r(a(9514)),d=n.default.Router();d.use("/auth",i.default),t.default=d},192:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(7252)),i=a(2008),d=a(160),o=n.default.Router();o.post("/signUp",i.signUp),o.get("/getDeliveryBoysForMerchant/:merchantId",i.getDeliveryBoysForMerchant),o.get("/getDeliveryManProfile/:id",i.getDeliveryManProfile),o.put("/updateDeliveryManProfile/:id",i.updateDeliveryManProfile),o.patch("/updateDeliveryManPassword",i.updatePassword),o.patch("/updateDeliveryManStatus/:id",i.updateDeliveryManStatus),o.get("/all",d.OrderAssigneeSchemaData),t.default=o},7170:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(7252)),i=r(a(1589)),d=r(a(192)),o=r(a(3643)),s=r(a(7064)),u=n.default.Router();u.use("/auth",d.default),u.use(i.default),u.use("/orders",s.default),u.use("/location",o.default),t.default=u},3643:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(7252)),i=a(2008),d=n.default.Router();d.patch("/update",i.updateLocation),t.default=d},7064:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(7252)),i=a(160),d=n.default.Router();d.get("/",i.getAssignedOrders),d.patch("/accept",i.acceptOrder),d.patch("/arrive",i.arriveOrder),d.patch("/pickUp",i.pickUpOrder),d.patch("/depart",i.departOrder),d.patch("/deliver",i.deliverOrder),d.post("/sendEmailOrMobileOtp",i.sendEmailOrMobileOtp),d.get("/getOrderById/:orderId",i.getOrderById),t.default=d},4139:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(7252)),i=r(a(7155)),d=r(a(7170)),o=r(a(9194)),s=r(a(3464)),u=n.default.Router();u.use("/admin",i.default),u.use("/deliveryBoy",d.default),u.use("/mobile",o.default),u.use("/customer",s.default),t.default=u},3736:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(7252)),i=a(596),d=a(2008),o=n.default.Router();o.post("/signUp",i.signUp),o.post("/signIn",i.signIn),o.post("/activatePlan",i.activateFreeSubcription),o.post("/sendEmailOrMobileOtp",i.sendEmailOrMobileOtp),o.post("/renewToken",i.renewToken),o.patch("/logout",i.logout),o.get("/getLocationOfMerchant",i.getLocationOfMerchant),o.get("/getProfileOfMerchant/:id",i.getProfileOfMerchant),o.post("/updateProfileOfMerchant/:id",i.updateProfileOfMerchant),o.get("/count/:id",i.getOrderCounts),o.get("/getAllDeliveryManOfMerchant/:id",i.getAllDeliveryManOfMerchant),o.get("/getorderHistory",i.getorderHistory),o.delete("/deleteDeliveryMan/:id",d.deleteDeliveryMan),o.patch("/moveToTrashDeliveryMan/:id",d.moveToTrashDeliveryMan),t.default=o},9194:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(7252)),i=r(a(7243)),d=r(a(3736)),o=r(a(6864)),s=r(a(8181)),u=n.default.Router();u.use("/auth",d.default),u.use(i.default),u.use("/order",o.default),u.use("/subscription",s.default),t.default=u},6864:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(7252)),i=a(2732),d=n.default.Router();d.post("/create",i.orderCreation),d.patch("/updateOrder/:orderId",i.orderUpdate),d.patch("/cancel",i.cancelOrder),d.get("/getAllOrdersFromMerchant/:id",i.getAllOrdersFromMerchant),d.get("/getAllRecentOrdersFromMerchant/:id",i.getAllRecentOrdersFromMerchant),d.delete("/deleteOrderFormMerchant/:id",i.deleteOrderFormMerchant),d.patch("/moveToTrashFormMerchant/:id",i.moveToTrash),t.default=d},8181:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(7252)),i=a(6881),d=n.default.Router();d.get("/getApproveSubscription/:id",i.getApproveSubscription),t.default=d},3271:function(e,t,a){var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(a(267)),d=n(a(804)),o=n(a(7779)),s=a(2581);t.default=()=>r(void 0,void 0,void 0,(function*(){if(0===(yield i.default.find()).length){const e=JSON.parse(process.env.ADMIN_DATA);e.password=yield(0,s.encryptPassword)({password:e.password}),yield i.default.create(e)}if(0===(yield d.default.find()).length){let e=yield o.default.findOne();e||(e=yield o.default.create({name:"Pound",symbol:"Â£",position:"right"})),yield d.default.create({currency:e._id})}}))},7076:function(e,t,a){var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(a(3271)),d=n(a(6313));t.default=()=>r(void 0,void 0,void 0,(function*(){yield(0,i.default)(),yield(0,d.default)()}))},6313:function(e,t,a){var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(a(1186));t.default=()=>r(void 0,void 0,void 0,(function*(){0===(yield i.default.find()).length&&(yield i.default.create({type:"1 Month Free Trial",amount:0,seconds:2592e3}))}))},2581:function(e,t,a){var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(n,i){function d(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(d,o)}s((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getMongoCommonPagination=t.updateWallet=t.emailOrMobileOtp=t.createAuthTokens=t.removeUploadedFile=t.uploadFile=t.generateIntRandomNo=t.encryptPassword=t.passwordValidation=t.sendMailService=void 0;const i=n(a(5486)),d=a(8749),o=n(a(9896)),s=n(a(829)),u=n(a(1572)),l=a(3503),c=n(a(267)),g=n(a(804)),f=n(a(8670)),m=n(a(8815)),p=n(a(8061));t.sendMailService=(e,t,a)=>u.default.createTransport({host:"smtp.gmail.com",port:587,secure:!1,auth:{user:process.env.APP_EMAIL,pass:process.env.APP_PASSWORD}}).sendMail({from:process.env.APP_EMAIL,to:e,subject:t,text:a}),t.passwordValidation=(e,t)=>r(void 0,void 0,void 0,(function*(){return i.default.compare(e,t)})),t.encryptPassword=e=>r(void 0,[e],void 0,(function*({password:e}){return yield i.default.hash(e,10)})),t.generateIntRandomNo=(e=1,t=11)=>(0,d.randomInt)(e,t),t.uploadFile=(e,t,a)=>new Promise(((r,n)=>{try{const n=e.split(":")[1].split(";")[0].split("/")[1],i=`uploads/${Date.now()}-${a}.${n}`;o.default.writeFileSync(i,Buffer.from(t,"base64")),r(i)}catch(e){n(new Error("Something went wrong with uploading file"))}})),t.removeUploadedFile=e=>{try{o.default.unlinkSync(e)}catch(e){throw new Error(e.message)}},t.createAuthTokens=e=>{const t=s.default.sign({id:e},process.env.ACCESS_SECRET_KEY,{expiresIn:+process.env.JWT_EXPIRY});return{accessToken:t,refreshToken:s.default.sign({id:e,accessToken:t},process.env.REFRESH_SECRET_KEY,{expiresIn:+process.env.JWT_REFRESH_EXPIRY})}},t.emailOrMobileOtp=(e,a)=>r(void 0,void 0,void 0,(function*(){if("DEV"!==process.env.ENV){const r=yield g.default.findOne();r.emailVerify&&(yield(0,t.sendMailService)(e,"Email Otp Verification Mail",a)),r.mobileNumberVerify}})),t.updateWallet=(e,t,a,n,i,...d)=>r(void 0,[e,t,a,n,i,...d],void 0,(function*(e,t,a,r,n,i=!0){const d=r===l.TRANSACTION_TYPE.DEPOSIT,o=d?e:-e,s=d?-e:e;let u;u=i?yield m.default.findOneAndUpdate({_id:a},{$inc:{balance:o}},{new:!0}):yield f.default.findOneAndUpdate({_id:a},{$inc:{balance:o}},{new:!0}),yield Promise.all([p.default.create({personId:a,message:n,type:r,userFlag:i?l.PERSON_TYPE.CUSTOMER:l.PERSON_TYPE.DELIVERY_BOY,availableBalance:u.balance,amount:e}),c.default.updateOne({_id:t},{$inc:{balance:s}})])})),t.getMongoCommonPagination=({pageCount:e,pageLimit:t})=>[{$facet:{count:[{$count:"totalDataCount"}],data:[{$skip:(e-1)*t},{$limit:t}]}},{$project:{totalDataCount:{$ifNull:[{$arrayElemAt:["$count.totalDataCount",0]},0]},data:1}}]},5852:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(1946));t.default={successResponse:(e,t,a)=>t.status(n.default.success).json({status:"SUCCESS",message:e.message||"Your request is successfully executed",data:e.data&&Object.keys(e.data).length?e.data:null}),failureResponse:(e,t,a)=>t.status(n.default.internalServerError).json({status:"FAILURE",message:e.message||"Internal server error.",data:e.data&&Object.keys(e.data).length?e.data:null}),badRequest:(e,t,a)=>t.status(n.default.badRequest).json({status:"BAD_REQUEST",message:e.message||"The request cannot be fulfilled due to bad syntax.",data:e.data&&Object.keys(e.data).length?e.data:null}),insufficientParameters:(e,t,a)=>t.status(n.default.badRequest).json({status:"BAD_REQUEST",message:e.message||"Insufficient parameters.",data:e.data&&Object.keys(e.data).length?e.data:null}),unAuthorizedRequest:(e,t,a)=>t.status(n.default.unAuthorizedRequest).json({status:"UNAUTHORIZED",message:e.message||"You are not authorized to access the request.",data:e.data&&Object.keys(e.data).length?e.data:null}),accessForbidden:(e,t,a)=>t.status(n.default.accessForbidden).json({status:"ACCESS_FORBIDEN",message:e.message||"You are not authorized to access the request.",data:e.data&&Object.keys(e.data).length?e.data:null}),dataNotFound:(e,t,a)=>t.status(n.default.notFound).json({status:"NOT_FOUND",message:e.message||"Data not found.",data:e.data&&Object.keys(e.data).length?e.data:null})}},1946:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default={success:200,badRequest:400,unAuthorizedRequest:401,accessForbidden:403,notFound:404,validationError:422,internalServerError:500}},4663:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a(5852));t.default=(e,t,a)=>{const r="en";t.ok=e=>{n.default.successResponse(e,t,r)},t.badRequest=e=>{n.default.badRequest(e,t,r)},t.failureResponse=e=>{n.default.failureResponse(e,t,r)},t.insufficientParameters=e=>{n.default.insufficientParameters(e,t,r)},t.unAuthorizedRequest=e=>{n.default.unAuthorizedRequest(e,t,r)},t.accessForbidden=e=>{n.default.accessForbidden(e,t,r)},t.dataNotFound=e=>{n.default.dataNotFound(e,t,r)},a()}},8229:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{const{value:a,error:r}=t.validate(e,{abortEarly:!1});return r?{isValid:!1,message:r.details.map((e=>e.message)).join("\n")}:{isValid:!0,value:a}}},9975:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.verificationStatusValidation=t.deliveryManOrderListValidation=t.userWalletListValidation=t.deliveryManWalletListValidation=t.orderWiseDeliveryManValidation=t.deliveryManIdValidation=t.orderLocationValidation=t.subcriptionStatusListValidation=t.subcriptionStatusValidation=t.subscription=t.manageSubscriptionValidation=t.paginationValidation=t.deliveryManListValidation=t.adminSignInValidation=t.deleteParcelValidation=t.updateParcelValidation=t.createParcelValidation=void 0;const n=r(a(2446)),i=a(3503);t.createParcelValidation=n.default.object({label:n.default.string().required()}),t.updateParcelValidation=n.default.object({label:n.default.string(),parcelTypeId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required()}),t.deleteParcelValidation=n.default.object({status:n.default.string().valid(i.SWITCH.ENABLE,i.SWITCH.DISABLE),parcelTypeId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required()}),t.adminSignInValidation=n.default.object({email:n.default.string().regex(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/).required(),password:n.default.string().regex(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/).required()}),t.deliveryManListValidation=n.default.object({pageCount:n.default.number().required(),pageLimit:n.default.number().required(),searchValue:n.default.string(),isVerified:n.default.boolean().required()}),t.paginationValidation=n.default.object({pageCount:n.default.number().required(),pageLimit:n.default.number().required()}),t.manageSubscriptionValidation=n.default.object({type:n.default.string(),amount:n.default.string(),discount:n.default.number(),features:n.default.array().items(n.default.string()),days:n.default.number(),subscriptionId:n.default.string().regex(/^[0-9a-fA-F]{24}$/)}),t.subscription=n.default.object({id:n.default.string().required().messages({"any.required":"Subscription ID is required","string.base":"Subscription ID must be a string"})}),t.subcriptionStatusValidation=n.default.object({subscriptionId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required(),subscriptionStatus:n.default.string().valid(i.SUBCRIPTION_REQUEST.APPROVED,i.SUBCRIPTION_REQUEST.REJECT)}),t.subcriptionStatusListValidation=n.default.object({isSubscribed:n.default.string().required(),pageCount:n.default.number().required(),pageLimit:n.default.number().required()}),t.orderLocationValidation=n.default.object({status:n.default.string().valid(i.ADMIN_ORDER_LOCATIONS.ACCEPTED,i.ADMIN_ORDER_LOCATIONS.ASSIGNED,i.ADMIN_ORDER_LOCATIONS.ARRIVED,i.ADMIN_ORDER_LOCATIONS.PICKED_UP,i.ADMIN_ORDER_LOCATIONS.DEPARTED).required()}),t.deliveryManIdValidation=n.default.object({deliveryManId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required()}),t.orderWiseDeliveryManValidation=n.default.object({orderId:n.default.number().required(),pageCount:n.default.number().required(),pageLimit:n.default.number().required()}),t.deliveryManWalletListValidation=n.default.object({deliveryManId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required(),transactionType:n.default.string().valid(i.TRANSACTION_TYPE.DEPOSIT,i.TRANSACTION_TYPE.WITHDRAW).required(),pageCount:n.default.number().required(),pageLimit:n.default.number().required()}),t.userWalletListValidation=n.default.object({transactionStatus:n.default.string().valid(i.SUBCRIPTION_REQUEST.APPROVED,i.SUBCRIPTION_REQUEST.PENDING,i.SUBCRIPTION_REQUEST.REJECT).required(),pageCount:n.default.number().required(),pageLimit:n.default.number().required()}),t.deliveryManOrderListValidation=n.default.object({deliveryManId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required(),pageCount:n.default.number().required(),pageLimit:n.default.number().required(),orderListType:n.default.string().valid(i.ORDER_LIST.PENDING,i.ORDER_LIST.COMPLETED).required()}),t.verificationStatusValidation=n.default.object({deliveryManId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required(),documentId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required(),status:n.default.string().valid(i.SUBCRIPTION_REQUEST.APPROVED,i.SUBCRIPTION_REQUEST.REJECT).required()})},9475:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.activateFreeSubcriptionValidation=t.renewTokenValidation=t.otpVerifyValidation=t.adminProfileValidation=t.adminCredentialValidation=t.customerSignUpValidation=t.customerUpdateValidation=t.updatePasswordValidation=t.deliveryManSignUpValidation=t.userSignUpValidation=t.userSignInValidation=void 0;const n=r(a(2446)),i=a(3503);t.userSignInValidation=n.default.object().keys({email:n.default.string().regex(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/).required(),password:n.default.string().regex(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/).required(),personType:n.default.string().valid(i.PERSON_TYPE.CUSTOMER,i.PERSON_TYPE.DELIVERY_BOY).required()}),t.userSignUpValidation=n.default.object().keys({name:n.default.string().required(),email:n.default.string().regex(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/).required(),password:n.default.string().regex(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/).required(),contactNumber:n.default.number().required(),countryCode:n.default.string().required(),otp:n.default.when(n.default.alternatives().try(n.default.exist().valid(!0).label("createdByAdmin")),{then:n.default.optional(),otherwise:n.default.number().required()}),image:n.default.string().regex(/^data:([-\w]+\/[-+\w.]+)?((?:;?[\w]+=[-\w]+)*)(;base64)?,(.*)/i).optional(),medicalCertificateNumber:n.default.number().optional(),medicalCertificate:n.default.string().regex(/^data:([-\w]+\/[-+\w.]+)?((?:;?[\w]+=[-\w]+)*)(;base64)?,(.*)/i).optional(),address:n.default.object().keys({street:n.default.string().required(),city:n.default.string().required(),postalCode:n.default.string().required(),country:n.default.string().required()}).required(),createdByAdmin:n.default.boolean().optional()}),t.deliveryManSignUpValidation=n.default.object().keys({firstName:n.default.string().required(),lastName:n.default.string().required(),trashed:n.default.boolean().default(!1),email:n.default.string().regex(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/).required(),password:n.default.string().regex(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/).required(),contactNumber:n.default.number().required(),address:n.default.string(),postCode:n.default.string().regex(/^[A-Za-z0-9\s-]+$/).required(),otp:n.default.when(n.default.alternatives().try(n.default.exist().valid(!0).label("createdByAdmin"),n.default.exist().label("merchantId")),{then:n.default.optional(),otherwise:n.default.number().required()}),medicalCertificateNumber:n.default.string().optional(),documents:n.default.array().items(n.default.object({documentId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required(),image:n.default.string().regex(/^data:([-\w]+\/[-+\w.]+)?((?:;?[\w]+=[-\w]+)*)(;base64)?,(.*)/i),documentNumber:n.default.string().required()})).optional(),image:n.default.string().regex(/^data:([-\w]+\/[-+\w.]+)?((?:;?[\w]+=[-\w]+)*)(;base64)?,(.*)/i).optional(),merchantId:n.default.string().optional(),createdByAdmin:n.default.boolean().optional()}),t.updatePasswordValidation=n.default.object().keys({contactNumber:n.default.string().pattern(/^[0-9]{10}$/).required(),oldPassword:n.default.string().min(8).required(),newPassword:n.default.string().min(8).required(),confirmPassword:n.default.string().min(8).required()}),t.customerUpdateValidation=n.default.object({firstName:n.default.string().optional(),lastName:n.default.string().optional(),country:n.default.string().optional(),city:n.default.string().optional(),address:n.default.string().optional(),postCode:n.default.string().optional(),mobileNumber:n.default.string().optional(),email:n.default.string().email().optional(),location:n.default.object({latitude:n.default.number().required(),longitude:n.default.number().required()}).optional(),trashed:n.default.boolean().optional()}),t.customerSignUpValidation=n.default.object().keys({firstName:n.default.string().required(),lastName:n.default.string().required(),email:n.default.string().regex(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/).required(),address:n.default.string().required(),postCode:n.default.string().required(),mobileNumber:n.default.string().required(),country:n.default.string().required(),city:n.default.string().required(),location:n.default.object({latitude:n.default.number(),longitude:n.default.number()}),createdByAdmin:n.default.boolean().optional(),trashed:n.default.boolean().default(!1)}),t.adminCredentialValidation=n.default.object().keys({adminId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required(),email:n.default.string().regex(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/).required(),contactNumber:n.default.number().required(),countryCode:n.default.string().required(),otp:n.default.number().required()}),t.adminProfileValidation=n.default.object().keys({adminId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required(),name:n.default.string().required(),profileImage:n.default.string().regex(/^data:([-\w]+\/[-+\w.]+)?((?:;?[\w]+=[-\w]+)*)(;base64)?,(.*)/i).required()}),t.otpVerifyValidation=n.default.object().keys({email:n.default.string().regex(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/).required(),contactNumber:n.default.number().required(),countryCode:n.default.string().required(),personType:n.default.string().valid(i.PERSON_TYPE.CUSTOMER,i.PERSON_TYPE.DELIVERY_BOY,i.PERSON_TYPE.ADMIN).required()}),t.renewTokenValidation=n.default.object().keys({refreshToken:n.default.string().required(),personType:n.default.string().valid(i.PERSON_TYPE.CUSTOMER,i.PERSON_TYPE.DELIVERY_BOY,i.PERSON_TYPE.ADMIN).required()}),t.activateFreeSubcriptionValidation=n.default.object().keys({userId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required(),medicalCertificateNumber:n.default.number().required(),medicalCertificate:n.default.string().regex(/^data:([-\w]+\/[-+\w.]+)?((?:;?[\w]+=[-\w]+)*)(;base64)?,(.*)/i).required()})},2336:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.dayChargesListValidation=t.cityListValidation=t.updateCityValidation=t.createCityValidation=t.updateDayWiseChargeValidation=t.createDayWiseChargeValidation=void 0;const n=r(a(2446)),i=a(3503);t.createDayWiseChargeValidation=n.default.object({cityId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required(),productChargeId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required(),fixedCharge:n.default.number().required(),title:n.default.string().required(),hours:n.default.number().required()}),t.updateDayWiseChargeValidation=n.default.object({cityId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required(),productChargeId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required(),dayNumber:n.default.number().required(),fixedCharge:n.default.number(),title:n.default.string(),hours:n.default.number()}),t.createCityValidation=n.default.object({cityName:n.default.string().required(),countryID:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required(),cancelCharge:n.default.number().required(),minimumDistance:n.default.number().required(),minimumWeight:n.default.number().required(),perDistanceCharge:n.default.number().required(),perWeightCharge:n.default.number().required(),commissionType:n.default.string().valid(i.CHARGE_TYPE.FIXED,i.CHARGE_TYPE.PERCENTAGE).required(),adminCommission:n.default.number().required(),pickupRequest:n.default.string().valid(i.PICKUP_REQUEST.REGULAR,i.PICKUP_REQUEST.EXPRESS).required()}),t.updateCityValidation=n.default.object({cityName:n.default.string(),countryID:n.default.string().regex(/^[0-9a-fA-F]{24}$/),cancelCharge:n.default.number(),minimumDistance:n.default.number(),minimumWeight:n.default.number(),perDistanceCharge:n.default.number(),perWeightCharge:n.default.number(),commissionType:n.default.string().valid(i.CHARGE_TYPE.FIXED,i.CHARGE_TYPE.PERCENTAGE),adminCommission:n.default.number(),pickupRequest:n.default.string().valid(i.PICKUP_REQUEST.REGULAR,i.PICKUP_REQUEST.EXPRESS),cityId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required()}),t.cityListValidation=n.default.object({cityName:n.default.string(),pageCount:n.default.number().required(),pageLimit:n.default.number().required()}),t.dayChargesListValidation=n.default.object({productChargeId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required(),pageCount:n.default.number().required(),pageLimit:n.default.number().required()})},7077:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.countryWiseCityValidation=t.updateCountryValidation=t.createCountryValidation=void 0;const n=r(a(2446)),i=a(3503);t.createCountryValidation=n.default.object({countryName:n.default.string().required(),distanceType:n.default.string().valid(i.DISTANCE_TYPE.KM,i.DISTANCE_TYPE.MILES).required(),weightType:n.default.string().valid(i.WEIGHT_TYPE.KG,i.WEIGHT_TYPE.POUND).required()}),t.updateCountryValidation=n.default.object({countryName:n.default.string(),distanceType:n.default.string().valid(i.DISTANCE_TYPE.KM,i.DISTANCE_TYPE.MILES),weightType:n.default.string().valid(i.WEIGHT_TYPE.KG,i.WEIGHT_TYPE.POUND),currency:n.default.string(),countryId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required()}),t.countryWiseCityValidation=n.default.object({countryId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required(),pageCount:n.default.number().required(),pageLimit:n.default.number().required()})},1883:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateLocationValidation=void 0;const n=r(a(2446));t.updateLocationValidation=n.default.object({country:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required(),city:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required(),location:n.default.object({latitude:n.default.number().required(),longitude:n.default.number().required()}).required()})},5510:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteDocumentValidation=t.updateDocumentValidation=t.createDocumentValidation=void 0;const n=r(a(2446)),i=a(3503);t.createDocumentValidation=n.default.object({name:n.default.string().required(),isRequired:n.default.boolean().required()}),t.updateDocumentValidation=n.default.object({name:n.default.string().required(),isRequired:n.default.boolean().required(),documentId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required()}),t.deleteDocumentValidation=n.default.object({status:n.default.string().valid(i.SWITCH.ENABLE,i.SWITCH.DISABLE).required(),documentId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required()})},9680:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteExtraChargesValidation=t.updateExtraChargesValidation=t.createExtraChargesValidation=void 0;const n=r(a(2446)),i=a(3503);t.createExtraChargesValidation=n.default.object({title:n.default.string().required(),charge:n.default.number().required(),chargeType:n.default.string().valid(i.CHARGE_TYPE.FIXED,i.CHARGE_TYPE.PERCENTAGE).required(),country:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required(),city:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required(),cashOnDelivery:n.default.boolean()}),t.updateExtraChargesValidation=n.default.object({title:n.default.string(),charge:n.default.number(),chargeType:n.default.string().valid(i.CHARGE_TYPE.FIXED,i.CHARGE_TYPE.PERCENTAGE),country:n.default.string().regex(/^[0-9a-fA-F]{24}$/),city:n.default.string().regex(/^[0-9a-fA-F]{24}$/),cashOnDelivery:n.default.boolean(),extraChargeId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required()}),t.deleteExtraChargesValidation=n.default.object({extraChargeId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required(),status:n.default.string().valid(i.SWITCH.ENABLE,i.SWITCH.DISABLE).default(i.SWITCH.DISABLE)})},8427:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.orderAdminListValidation=t.orderCancelValidation=t.orderIdValidation=t.orderDeliverValidation=t.orderPickUpValidation=t.orderListByDeliveryManValidation=t.orderArriveValidation=t.orderAcceptValidation=t.orderAssignValidation=t.newOrderCreation=t.orderCreateValidation=void 0;const n=r(a(2446)),i=a(3503);t.orderCreateValidation=n.default.object({parcelType:n.default.string().required(),weight:n.default.number().required(),distance:n.default.number(),country:n.default.string().required(),city:n.default.string().required(),parcelsCount:n.default.number().required(),startPickupDate:n.default.date().timestamp(),endPickupDate:n.default.date().timestamp(),startDeliveryDate:n.default.date().timestamp(),endDeliveryDate:n.default.date().timestamp(),pickupDetails:n.default.object({location:n.default.object({latitude:n.default.number().required(),longitude:n.default.number().required()}).required(),dateTime:n.default.date().timestamp().required(),address:n.default.string().required(),countryCode:n.default.string().required(),mobileNumber:n.default.number().required(),email:n.default.string(),pickupRequest:n.default.string().valid(i.PICKUP_REQUEST.REGULAR,i.PICKUP_REQUEST.EXPRESS).default(i.PICKUP_REQUEST.REGULAR),description:n.default.string(),postCode:n.default.string().regex(/^[A-Za-z0-9\s-]+$/).required()}),deliveryDetails:n.default.object({location:n.default.object({latitude:n.default.number().required(),longitude:n.default.number().required()}).required(),dateTime:n.default.date().timestamp().required(),address:n.default.string().required(),countryCode:n.default.string().required(),mobileNumber:n.default.number().required(),email:n.default.string(),description:n.default.string(),postCode:n.default.string().regex(/^[A-Za-z0-9\s-]+$/).required(),cashCollection:n.default.number()}),paymentCollection:n.default.string(),paymentOrderLocation:n.default.string().valid(i.ORDER_LOCATION.PICK_UP,i.ORDER_LOCATION.DELIVERY),cashOnDelivery:n.default.boolean().default(!1),vehicle:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required(),duration:n.default.string().required(),deliveryManId:n.default.string().pattern(/^[0-9a-fA-F]{24}$/).allow("").default("")}),t.newOrderCreation=n.default.object({parcelsCount:n.default.number().required(),dateTime:n.default.date().timestamp().required(),paymentCollection:n.default.string(),paymentCollectionRupees:n.default.number(),description:n.default.string(),pickupDetails:n.default.object({dateTime:n.default.date().timestamp().required(),address:n.default.string().required(),merchantId:n.default.string().required(),name:n.default.string().required(),mobileNumber:n.default.number().required(),email:n.default.string(),pickupRequest:n.default.string().valid(i.PICKUP_REQUEST.REGULAR,i.PICKUP_REQUEST.EXPRESS).default(i.PICKUP_REQUEST.REGULAR),description:n.default.string(),postCode:n.default.string().regex(/^[A-Za-z0-9\s-]+$/).required()}),deliveryDetails:n.default.object({dateTime:n.default.date().timestamp(),address:n.default.string().required(),name:n.default.string().required(),mobileNumber:n.default.number().required(),email:n.default.string(),description:n.default.string().allow(""),postCode:n.default.string().regex(/^[A-Za-z0-9\s-]+$/).required(),cashCollection:n.default.number()}),cashOnDelivery:n.default.boolean().default(!1),trashed:n.default.boolean().default(!1),deliveryManId:n.default.string().pattern(/^[0-9a-fA-F]{24}$/).allow("").default("")}),t.orderAssignValidation=n.default.object({deliveryManId:n.default.string().required(),orderId:n.default.number().required()}),t.orderAcceptValidation=n.default.object({orderId:n.default.number().required(),status:n.default.string().valid(i.ORDER_REQUEST.ACCEPTED,i.ORDER_REQUEST.REJECT).required()}),t.orderArriveValidation=n.default.object({orderId:n.default.number().required()}),t.orderListByDeliveryManValidation=n.default.object({startDate:n.default.string(),endDate:n.default.string(),status:n.default.string().valid(i.ORDER_HISTORY.CREATED,i.ORDER_HISTORY.ASSIGNED,i.ORDER_HISTORY.ACCEPTED,i.ORDER_HISTORY.ARRIVED,i.ORDER_HISTORY.PICKED_UP,i.ORDER_HISTORY.DELIVERED,i.ORDER_HISTORY.DEPARTED,i.ORDER_HISTORY.CANCELLED).allow(""),pageCount:n.default.number().required(),pageLimit:n.default.number().required()}),t.orderPickUpValidation=n.default.object({orderId:n.default.number().required(),userSignature:n.default.string().regex(/^data:([-\w]+\/[-+\w.]+)?((?:;?[\w]+=[-\w]+)*)(;base64)?,(.*)/i).required(),pickupTimestamp:n.default.date().timestamp().required(),otp:n.default.number()}),t.orderDeliverValidation=n.default.object({orderId:n.default.number().required(),deliveryManSignature:n.default.string().regex(/^data:([-\w]+\/[-+\w.]+)?((?:;?[\w]+=[-\w]+)*)(;base64)?,(.*)/i).required(),deliverTimestamp:n.default.date().timestamp().required(),otp:n.default.number()}),t.orderIdValidation=n.default.object({orderId:n.default.number().required()}),t.orderCancelValidation=n.default.object({orderId:n.default.number().required(),reason:n.default.string()}),t.orderAdminListValidation=n.default.object({date:n.default.string(),status:n.default.string().valid(...Object.keys(i.ORDER_HISTORY)),user:n.default.string().regex(/^[0-9a-fA-F]{24}$/),deliveryMan:n.default.string().regex(/^[0-9a-fA-F]{24}$/),orderId:n.default.number(),invoiceId:n.default.number(),pageCount:n.default.number().default(1),pageLimit:n.default.number().default(10)})},4111:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteVehicleValidation=t.updateVehicleValidation=t.createVehicleValidation=void 0;const n=r(a(2446)),i=a(3503);t.createVehicleValidation=n.default.object({name:n.default.string().required(),capacity:n.default.number().required(),size:n.default.number().required(),description:n.default.string().required(),cityWise:n.default.string().valid(i.VEHICLE_CITY_TYPE.ALL,i.VEHICLE_CITY_TYPE.CITY_WISE).required(),city:n.default.array().items(n.default.string().regex(/^[0-9a-fA-F]{24}$/).required()),image:n.default.string().regex(/data:image\/[bmp,gif,ico,jpg,jpeg,png,svg,webp,x\-icon,svg+xml]+;base64,[a-zA-Z0-9,+,/]+={0,2}/).required()}),t.updateVehicleValidation=n.default.object({name:n.default.string(),capacity:n.default.number(),size:n.default.number(),description:n.default.string(),cityWise:n.default.string().valid(i.VEHICLE_CITY_TYPE.ALL,i.VEHICLE_CITY_TYPE.CITY_WISE),city:n.default.array().items(n.default.string().regex(/^[0-9a-fA-F]{24}$/)),image:n.default.string().regex(/data:image\/(?:bmp|gif|ico|jpg|png|jpeg|svg|webp|x-icon|svg\+xml);base64,[a-zA-Z0-9+/]+={0,2}/),vehicleId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required()}),t.deleteVehicleValidation=n.default.object({vehicleId:n.default.string().regex(/^[0-9a-fA-F]{24}$/).required(),status:n.default.string().valid(i.SWITCH.ENABLE,i.SWITCH.DISABLE).default(i.SWITCH.DISABLE)})},5486:e=>{e.exports=require("bcrypt")},3268:e=>{e.exports=require("body-parser")},8577:e=>{e.exports=require("cors")},8749:e=>{e.exports=require("crypto")},818:e=>{e.exports=require("dotenv")},7252:e=>{e.exports=require("express")},9856:e=>{e.exports=require("http")},2446:e=>{e.exports=require("joi")},829:e=>{e.exports=require("jsonwebtoken")},6037:e=>{e.exports=require("mongoose")},2096:e=>{e.exports=require("morgan")},1572:e=>{e.exports=require("nodemailer")},4437:e=>{e.exports=require("socket.io")},8450:e=>{e.exports=require("swagger-jsdoc")},2320:e=>{e.exports=require("swagger-ui-express")},9896:e=>{e.exports=require("fs")}},t={};!function a(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,a),i.exports}(73)})();